{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?409d","webpack:///./src/player/style.scss?295b","webpack:///./src/App.vue?330a","webpack:///./src/App.vue?86e1","webpack:///./src/App.vue?269c","webpack:///./src/player/buttonAndLayer.ts","webpack:///./src/player/IconButton.ts","webpack:///./src/player/toast.ts","webpack:///./src/player/volumeLayer.ts","webpack:///./src/player/qualitySelector.ts","webpack:///./src/player/utils.ts","webpack:///./src/player/progressBar.ts","webpack:///./src/player/danmaku/danmaku.ts","webpack:///./src/player/danmaku/danmakuDrawer.ts","webpack:///./src/player/danmaku/canvas.ts","webpack:///./src/player/danmaku/danmakuLayer.ts","webpack:///./src/player/danmaku/danmakuStyleLayer.ts","webpack:///./src/player/danmaku/danmakuForm.ts","webpack:///./src/player/ui.ts","webpack:///./src/player/qualityLevelAdapter.ts","webpack:///./src/player/player.ts","webpack:///./src/App.vue","webpack:///./src/App.vue?0ab4","webpack:///./src/App.vue?bff9","webpack:///./src/main.ts","webpack:///./src/assets/logo.png","webpack:///./src/player/style.scss"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","content","locals","add","default","___CSS_LOADER_API_IMPORT___","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","slot","_v","model","settings","callback","$$v","$set","expression","on","playMp4","playHls","playMpd","form","setSrc","_s","flowDuration","fadeoutDuration","alpha","ref","$event","type","indexOf","_k","keyCode","sendDanmaku","staticStyle","random","sendRandomDanmaku","debug","staticRenderFns","ButtonAndLayer","ui","layerHideDelay","bottomOffset","hideTimeout","_isShow","player","mouseenterShowLayer","clearTimeout","isMouseInUI","showLayer","mouseleaveHideLayer","setTimeout","hideLayer","$btn","addEventListener","$layer","classList","updateLayerPosition","remove","style","display","rootRect","$root","getBoundingClientRect","btnRect","layerRect","left","width","bottom","IconButton","$div","$use","querySelector","iconAttr","titleAttr","switchIcon","switchTitle","attributeName","setAttributeNS","getAttribute","setAttribute","Toast","isShow","document","createElement","append","clientWidth","clientHeight","text","innerText","parseInt","x","top","y","enableBoundaryChecking","volumeValue","areaHeight","hideToast","$video","toast","updateController","$valueLabel","btn","toggleMuted","$dragArea","$controller","$current","volume","options","mousemoveControlVolume","e","pageY","rect","range","round","mouseupReleaseControl","removeEventListener","init","plus","showToast","minus","show","string","hide","updateToastPosition","height","updateButton","attr","switch","toString","transform","levels","currentLevel","autoLevel","selected","autoQualitySelect","index","bitrate","clickEvent","$item","target","hasAttribute","forEach","level","emit","updateLevelMenu","every","innerHTML","reverse","VideoType","Normal","SecondsToString","seconds","format","h","Math","floor","split","join","padStart","Hash","str","chr","hash","charCodeAt","RandomID","len","ALPHABET","rtn","charAt","DanmakuType","barWidth","_currentTime","percent","offsetWidth","isDragging","$time","$buffer","currentTime","duration","isNaN","updateTime","updateBar","updateBufferBar","resize","initEventAboutController","initEventAboutToast","mouseMoveChangeTime","clientX","update","mouseup","mouseenter","mousedown","mousemove","playerRect","live","timeFormat","resetTimeZone","resetProgressBar","buffered","start","end","MakeDanmakuOptions","borderColor","fill","Flow","id","fontSize","Danmaku","assign","font","DanmakuDrawer","enable","selfCanvas","ctx","getContext","textBaseline","textAlign","danmaku","measureText","clearRect","lineWidth","strokeStyle","strokeRect","shadowBlur","shadowColor","fillStyle","fillText","DanmakuFlowDrawer","getSize","draw","canvasWidth","lastFrameTime","speed","DanmakuFixedDrawer","timeout","LimitType","Canvas","caches","$canvas","toggle","drawer","canvas","drawImage","size","val","globalAlpha","MakeDanmakuLayerOptions","limit","UnOverlap","contextMenu","undefined","template","MakeDanmakuDrawerMenu","menus","$content","$buttons","$span","prepend","copyText","el","body","appendChild","select","execCommand","removeChild","danmakus","showed","topEnables","topAndBottomDisables","bottomEnables","flowEnables","flowDisables","lineHeights","topLines","bottomLines","flowLines","displayArea","topLineIndex","flowY","bottomY","frameTime","updateDanmakuTime","calcTopInterval","destroied","addDanmakuToCanvasTime","lastFrame","event","hideMenu","$menu","found","findDrawers","createDanmakuMenu","pageX","right","clientY","preventDefault","stopPropagation","toggleFullScreen","clear","loop","drawers","copy","clearCache","lineHeight","fontHeight","screen","Percent75","Half","Percent25","renderAll","trim","filter","DanmakuLayer","find","calcFlowY","set","addDrawer","Top","calcTopY","calcBottomY","createDrawer","includes","time","abs","_d","Number","UnLimited","removeDrawer","addDanmakuToCanvas","Date","now","paused","updateDanmaku","requestAnimationFrame","clearInterval","all","drawDanmaku","flow","fixed","positionY","offsetX","offsetY","replace","DanmakuStyleLayer","colors","map","color","$types","Array","from","querySelectorAll","$colors","$dom","$type","$typeFlow","$typeTop","$typeBottom","$color","danmakuColor","danmakuType","danmakuTypeFlow","danmakuTypeTopFixed","danmakuTypeBottomFixed","styleLayer","$input","send","focus","getStyle","beforeSendDanmaku","Promise","resolve","success","danmakuLayer","danmakuSend","placeholder","danmakuInputHint","danmakuForm","UiString","play","pause","fullscreen","cancelFullscreen","switchQuality","showDanmaku","hideDanmaku","loading","pictureInPictureOn","pictureInPictureOff","_isMouseInUI","extraButtons","$controlBar","$gradientBG","qualitySelector","progressBar","danmakuStyleLayer","$loading","$controllerButtonsRightLayout","btnFullScreen","btnPIP","togglePictureInPicture","then","updatePIPButton","a","updateFullScreenButton","btnPlay","updatePlayButton","btnShowDanmaku","updateDanmakuButton","insertExtraButtons","cancelHideUIDelay","uiFadeOutDelay","clearExtraButtons","$e","fullScreen","isFullScreen","isSupportPictureInPicture","pictureInPicture","isInPictureInPicture","title","destroy","AdapterEvents","OnLoad","OnChanged","createLevelsFromHls","hls","item","min","values","createLevelsFromDash","dash","list","getBitrateInfoListFor","qualityIndex","QualityLevelAdapter","Hls","Events","LEVEL_LOADED","_level","setting","getSettings","streaming","abr","isAuto","setQualityFor","autoSwitchBitrate","video","limitBitrateByPortal","updateSettings","ForceUse","DanPlayerVersion","icon","defaultColor","MakeDefaultOptions","autoplay","src","iconSrc","forward","backward","unique","forceUse","preload","_ui","updateInterval","pictureInPictureEnabled","documentElement","_width","_height","_duration","_loading","_paused","_isFullScreen","delayResize","console","info","$icon","Player","instances","videoLayer","parent","parentElement","insertBefore","tagName","toLowerCase","removeAttribute","outerHTML","stop","startsWith","up","down","fullscreenElement","hideUIDelay","errorHandler","hideButton","showButton","resizeEvt","adapter","updateLevel","changeLevelTo","updateUI","updateSrc","$style","srcHasChanged","newOptions","optionsHasChanged","JSON","stringify","detachMedia","reset","ms","array","match","attachMedia","loadSource","config","capLevelToPlayerSize","useHls","Dash","dashjs","MediaPlayer","initialize","useDash","requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen","exitFullscreen","mozCancelFullScreen","webkitCancelFullScreen","msExitFullscreen","pictureInPictureElement","requestPictureInPicture","exitPictureInPicture","quality","danmakuLimit","keys","isChinese","count","timeRange","videoSrc","$debug","setInterval","randomTime","randomType","fillDanmakus","getElementById","$myButton","onclick","alert","items","deep","component","use","productionTip","render","$mount"],"mappings":"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","file":"js/app.836bfffe.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"17611838\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-3-1!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-3-2!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-3-3!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-3-4!./style.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"b9e0523a\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","import mod from \"-!../node_modules/vue-style-loader/index.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../node_modules/vue-style-loader/index.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"body,html{padding:0;margin:0;height:100vh;background:#2c3e50}#app{color:#2c3e50;max-width:800px;margin:0 auto;-webkit-font-smoothing:subpixel-antialiased}#app .video-player{display:block;margin:0 auto}#app .el-slider{width:150px}#app .title{-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}#app .title,#app .title .left{display:-webkit-box;display:-ms-flexbox;display:flex}#app .title .left img{height:50px}#app .title .left .text{display:inline-block;margin-left:20px;font-size:40px;font-weight:100;line-height:50px}#app .title .right{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}#app .title .right .el-link+.el-link{margin-left:20px}.extra-button{font-size:1.5rem}.debug-info{position:fixed;right:0;bottom:0;padding:4px;background:#e7e7e7;overflow:auto;max-width:100vw;z-index:999}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-card',{attrs:{\"id\":\"app\"}},[_c('div',{staticClass:\"title\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('div',{staticClass:\"left\"},[_c('img',{attrs:{\"src\":require(\"@/assets/logo.png\"),\"title\":\"logo\",\"alt\":\"logo\"}}),_c('div',{staticClass:\"text\"},[_vm._v(\"DanPlayer v0.0.37\")])]),_c('div',{staticClass:\"right\"},[_c('el-link',{attrs:{\"type\":\"primary\",\"href\":\"https://github.com/gzlock/danplayer\",\"target\":\"_blank\"}},[_vm._v(\"Github\")]),_c('el-link',{attrs:{\"href\":\"https://github.com/gzlock/danplayer/blob/master/src/App.vue\",\"target\":\"_blank\"}},[_vm._v(\"本页代码 \")])],1)]),_c('div',{attrs:{\"id\":\"player\"}}),_c('h3',[_vm._v(\"功能调试区域\")]),_c('el-tabs',{attrs:{\"value\":\"player\"}},[_c('el-tab-pane',{attrs:{\"label\":\"播放器相关\",\"name\":\"player\"}},[_c('el-form',{attrs:{\"size\":\"mini\",\"label-width\":\"140px\"}},[_c('el-form-item',{attrs:{\"label\":\"Player Language\"}},[_c('el-radio-group',{model:{value:(_vm.settings.isChinese),callback:function ($$v) {_vm.$set(_vm.settings, \"isChinese\", $$v)},expression:\"settings.isChinese\"}},[_c('el-radio-button',{attrs:{\"label\":true}},[_vm._v(\"中文\")]),_c('el-radio-button',{attrs:{\"label\":false}},[_vm._v(\"English\")])],1)],1),_c('el-form-item',{attrs:{\"label\":\"播放器形态\"}},[_c('el-radio-group',{model:{value:(_vm.settings.live),callback:function ($$v) {_vm.$set(_vm.settings, \"live\", $$v)},expression:\"settings.live\"}},[_c('el-radio-button',{attrs:{\"label\":false}},[_vm._v(\"普通视频\")]),_c('el-radio-button',{attrs:{\"label\":true}},[_vm._v(\"直播\")])],1)],1),_c('el-form-item',{attrs:{\"label\":\"全屏功能\"}},[_c('el-radio-group',{model:{value:(_vm.settings.fullscreen),callback:function ($$v) {_vm.$set(_vm.settings, \"fullscreen\", $$v)},expression:\"settings.fullscreen\"}},[_c('el-radio-button',{attrs:{\"label\":true}},[_vm._v(\"允许\")]),_c('el-radio-button',{attrs:{\"label\":false}},[_vm._v(\"不允许\")])],1)],1),_c('el-form-item',{attrs:{\"label\":\"控制栏发弹幕功能\"}},[_c('el-radio-group',{model:{value:(_vm.settings.danmakuForm),callback:function ($$v) {_vm.$set(_vm.settings, \"danmakuForm\", $$v)},expression:\"settings.danmakuForm\"}},[_c('el-radio-button',{attrs:{\"label\":true}},[_vm._v(\"开启\")]),_c('el-radio-button',{attrs:{\"label\":false}},[_vm._v(\"关闭\")])],1),_c('div',[_vm._v(\" 关闭发弹幕的功能区域后，如果仍然需要支持观众发弹幕，则需要自行实行相关的功能 \")])],1),_c('el-form-item',{attrs:{\"label\":\"音量\"}},[_c('div',[_vm._v(\" 范围 0~1 \")]),_c('el-slider',{attrs:{\"min\":0,\"max\":1,\"step\":0.1},model:{value:(_vm.settings.volume),callback:function ($$v) {_vm.$set(_vm.settings, \"volume\", $$v)},expression:\"settings.volume\"}})],1),_c('el-form-item',{attrs:{\"label\":\"颜色\"}},[_c('el-color-picker',{model:{value:(_vm.settings.color),callback:function ($$v) {_vm.$set(_vm.settings, \"color\", $$v)},expression:\"settings.color\"}}),_c('div',[_vm._v(\"视频进度条滑块，音量滑块，设置选项的高亮颜色\")])],1),_c('el-form-item',{attrs:{\"label\":\"视频网址\"}},[_c('div',[_c('el-button',{on:{\"click\":_vm.playMp4}},[_vm._v(\"播放Mp4视频资源(浏览器原生支持)\")])],1),_c('div',[_c('el-button',{on:{\"click\":_vm.playHls}},[_vm._v(\"播放Hls视频资源(使用hls.js)\")])],1),_c('div',[_c('el-button',{on:{\"click\":_vm.playMpd}},[_vm._v(\"播放MPD视频资源(使用dash.js)\")])],1),_c('br'),_c('el-input',{attrs:{\"placeholder\":\"输入网址\"},model:{value:(_vm.form.videoSrc),callback:function ($$v) {_vm.$set(_vm.form, \"videoSrc\", $$v)},expression:\"form.videoSrc\"}}),_c('el-button',{on:{\"click\":_vm.setSrc}},[_vm._v(\"播放器自定义资源\")])],1)],1)],1),_c('el-tab-pane',{attrs:{\"label\":\"弹幕相关\",\"name\":\"danmaku_layer\"}},[_c('el-form',{attrs:{\"size\":\"mini\",\"label-width\":\"140px\"}},[_c('el-form-item',{attrs:{\"label\":\"弹幕\"}},[_c('el-radio-group',{model:{value:(_vm.settings.danmaku),callback:function ($$v) {_vm.$set(_vm.settings, \"danmaku\", $$v)},expression:\"settings.danmaku\"}},[_c('el-radio-button',{attrs:{\"label\":true}},[_vm._v(\"启用\")]),_c('el-radio-button',{attrs:{\"label\":false}},[_vm._v(\"禁用\")])],1),_c('div',[_vm._v(\"提示：弹幕的逻辑还是在运作的，只是不渲染弹幕\")])],1),_c('el-form-item',{attrs:{\"label\":\"弹幕显示\"}},[_c('el-radio-group',{model:{value:(_vm.settings.danmakuLimit),callback:function ($$v) {_vm.$set(_vm.settings, \"danmakuLimit\", $$v)},expression:\"settings.danmakuLimit\"}},[_c('el-radio-button',{attrs:{\"label\":\"UnLimited\"}},[_vm._v(\"不作限制\")]),_c('el-radio-button',{attrs:{\"label\":\"UnOverlap\"}},[_vm._v(\"防止重叠\")]),_c('el-radio-button',{attrs:{\"label\":\"Percent25\"}},[_vm._v(\"25%屏幕显示\")]),_c('el-radio-button',{attrs:{\"label\":\"Half\"}},[_vm._v(\"50%屏幕显示\")]),_c('el-radio-button',{attrs:{\"label\":\"Percent75\"}},[_vm._v(\"75%屏幕显示\")])],1)],1),_c('el-form-item',{attrs:{\"label\":\"流动式弹幕的时间\"}},[_c('div',[_vm._v(\"以秒单位，值越大速度越慢：\"+_vm._s(_vm.settings.flowDuration)+\"秒\")]),_c('div',[_vm._v(\"从右到左在屏幕的逗留时间，所以时间越小，弹幕的速度越快\")]),_c('el-slider',{attrs:{\"min\":1,\"max\":20},model:{value:(_vm.settings.flowDuration),callback:function ($$v) {_vm.$set(_vm.settings, \"flowDuration\", $$v)},expression:\"settings.flowDuration\"}})],1),_c('el-form-item',{attrs:{\"label\":\"固定式弹幕的时间\"}},[_c('div',[_vm._v(\"以秒单位：\"+_vm._s(_vm.settings.fadeoutDuration)+\"秒\")]),_c('el-slider',{attrs:{\"min\":1,\"max\":20},model:{value:(_vm.settings.fadeoutDuration),callback:function ($$v) {_vm.$set(_vm.settings, \"fadeoutDuration\", $$v)},expression:\"settings.fadeoutDuration\"}})],1),_c('el-form-item',{attrs:{\"label\":\"弹幕透明度\"}},[_c('div',[_vm._v(\"范围在 0 ~ 1：\"+_vm._s(_vm.settings.alpha))]),_c('el-slider',{attrs:{\"min\":0.1,\"max\":1.0,\"step\":0.1},model:{value:(_vm.settings.alpha),callback:function ($$v) {_vm.$set(_vm.settings, \"alpha\", $$v)},expression:\"settings.alpha\"}})],1),_c('el-form-item',{attrs:{\"label\":\"发弹幕\"}},[_c('el-radio-group',{ref:\"danmaku-type\",model:{value:(_vm.form.type),callback:function ($$v) {_vm.$set(_vm.form, \"type\", $$v)},expression:\"form.type\"}},[_c('el-radio-button',{attrs:{\"label\":0}},[_vm._v(\"顶部\")]),_c('el-radio-button',{attrs:{\"label\":1}},[_vm._v(\"流动\")]),_c('el-radio-button',{attrs:{\"label\":2}},[_vm._v(\"底部\")])],1),_c('el-input',{attrs:{\"placeholder\":\"回车发送\"},on:{\"keypress\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.sendDanmaku($event)}},model:{value:(_vm.form.danmaku),callback:function ($$v) {_vm.$set(_vm.form, \"danmaku\", $$v)},expression:\"form.danmaku\"}},[_c('el-button',{attrs:{\"slot\":\"append\",\"type\":\"primary\"},on:{\"click\":_vm.sendDanmaku},slot:\"append\"},[_vm._v(\"发送\")])],1)],1),_c('el-form-item',{attrs:{\"label\":\"发随机弹幕\"}},[_c('div',{staticStyle:{\"width\":\"200px\"}},[_c('el-input',{model:{value:(_vm.random.timeRange),callback:function ($$v) {_vm.$set(_vm.random, \"timeRange\", $$v)},expression:\"random.timeRange\"}},[_c('span',{attrs:{\"slot\":\"append\"},slot:\"append\"},[_vm._v(\"秒内\")])]),_c('el-input',{model:{value:(_vm.random.count),callback:function ($$v) {_vm.$set(_vm.random, \"count\", $$v)},expression:\"random.count\"}},[_c('span',{attrs:{\"slot\":\"append\"},slot:\"append\"},[_vm._v(\"条弹幕\")])])],1),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.sendRandomDanmaku}},[_vm._v(\"填充弹幕\")])],1)],1)],1),_c('el-tab-pane',{attrs:{\"label\":\"事件相关\",\"name\":\"player_event\"}},[_c('p',[_vm._v(\"DanPlayer暴露了video元素(player.$video)，所以涉及到原生的视频事件需求，大家可以继续绑定到player.$video\"),_c('br'),_vm._v(\"例如：播放进度、音量的变化。\")]),_c('p',[_vm._v(\"由于\\\"弹幕发送前\\\"事件较为特殊，因此设置在player的参数里，请看代码：\")]),_c('pre',[_vm._v(\"async function beforeSendDanmaku(danmaku){\\n  return true 通知player可以将这次发送的弹幕显示到屏幕上\\n  return false 通知player不要将这次发送的弹幕显示到屏幕上\\n}\\nnew danmaku.Player({beforeSendDanmaku})\\nplayer.set({beforeSendDanmaku})\\n          \")]),_c('div',[_vm._v(\"DanPlayer支持的事件： \"),_c('ul',[_c('li',[_vm._v(\"使用player.on('事件名称',player=>void)绑定事件\")]),_c('li',[_vm._v(\"optionChanged：当player的options即设置改变时触发，传入当前的player实例。\")]),_c('li',[_vm._v(\"toggleFullscreen：当player切换全屏状态时触发，并传入当前的player实例\"),_c('br'),_vm._v(\"可以使用player.isFullScreen查询是否处于全屏状态。 \")])])])])],1)],1),_c('div',{staticClass:\"debug-info\"},[_c('div',[_c('el-checkbox',{model:{value:(_vm.debug),callback:function ($$v) {_vm.debug=$$v},expression:\"debug\"}},[_vm._v(\"Debug信息\")])],1),_c('pre')])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { EventEmitter } from 'eventemitter3'\nimport { Player } from './player'\nimport { Ui } from '@/player/ui'\n\nexport class ButtonAndLayer extends EventEmitter {\n  player: Player\n  ui: Ui\n  $btn!: HTMLElement\n  $layer!: HTMLElement\n\n  protected layerHideDelay = 200\n  protected bottomOffset = 40\n  private hideTimeout = -1\n  private _isShow: boolean = false\n\n  get isShow (): boolean {\n    return this._isShow\n  }\n\n  constructor (ui: Ui) {\n    super()\n    this.ui = ui\n    this.player = ui.player\n  }\n\n  protected init () {\n    const mouseenterShowLayer = () => {\n      clearTimeout(this.hideTimeout)\n      this.ui.isMouseInUI = true\n      this.showLayer()\n    }\n    const mouseleaveHideLayer = () => {\n      this.ui.isMouseInUI = false\n      clearTimeout(this.hideTimeout)\n      this.hideTimeout = setTimeout(() => {\n        this.hideLayer()\n      }, this.layerHideDelay)\n    }\n    this.$btn.addEventListener('mouseenter', mouseenterShowLayer)\n    this.$btn.addEventListener('mouseleave', mouseleaveHideLayer)\n\n    this.$layer.addEventListener('mouseenter', mouseenterShowLayer)\n    this.$layer.addEventListener('mouseleave', mouseleaveHideLayer)\n  }\n\n  showLayer () {\n    this._isShow = true\n    this.$layer.classList.add('show')\n    this.updateLayerPosition()\n  }\n\n  hideLayer () {\n    this._isShow = false\n    this.$layer.classList.remove('show')\n  }\n\n  toggleLayer () {\n    if (this._isShow) {\n      this.hideLayer()\n    } else {\n      this.showLayer()\n    }\n  }\n\n  showButton () {\n    this.$btn.style.display = ''\n  }\n\n  hideButton () {\n    this.$btn.style.display = 'none'\n  }\n\n  updateLayerPosition () {\n    if (!this._isShow) return\n    const rootRect = this.ui.player.$root.getBoundingClientRect()\n    const btnRect = this.$btn.getBoundingClientRect()\n    const layerRect = this.$layer.getBoundingClientRect()\n    const left = btnRect.left + (btnRect.width / 2) - rootRect.left - layerRect.width / 2\n\n    this.$layer.style.left = left + 'px'\n    this.$layer.style.bottom = this.bottomOffset + 'px'\n    // console.log('update', { left })\n  }\n\n  destroy () {\n    clearTimeout(this.hideTimeout)\n  }\n}\n","export class IconButton {\n  $root: HTMLElement\n  $use: SVGUseElement\n\n  constructor ($div: HTMLElement) {\n    this.$root = $div\n    this.$use = this.$root.querySelector('use') as SVGUseElement\n  }\n\n  switch (iconAttr: string, titleAttr?: string) {\n    this.switchIcon(iconAttr)\n    if (titleAttr) this.switchTitle(titleAttr)\n  }\n\n  switchIcon (attributeName: string) {\n    this.$use.setAttributeNS('http://www.w3.org/1999/xlink', 'href',\n      '#' + this.$root.getAttribute(attributeName) as string)\n  }\n\n  switchTitle (attributeName: string) {\n    this.$root.setAttribute('title', this.$root.getAttribute(attributeName) as string)\n  }\n\n  show () {\n    this.$root.classList.remove('hide')\n  }\n\n  hide () {\n    this.$root.classList.add('hide')\n  }\n}\n","import { Ui } from '@/player/ui'\n\nexport class Toast {\n  readonly $root: HTMLElement\n  isShow: boolean = false\n\n  constructor (ui: Ui) {\n    this.$root = document.createElement('div')\n    this.$root.classList.add('toast')\n    ui.$root.append(this.$root)\n  }\n\n  get width () { return this.$root.clientWidth }\n\n  get height () { return this.$root.clientHeight }\n\n  show () {\n    this.isShow = true\n    this.$root.classList.add('show')\n  }\n\n  hide () {\n    this.isShow = false\n    this.$root.classList.remove('show')\n  }\n\n  set text (text: string) {\n    this.$root.innerText = text\n  }\n\n  get text () {\n    return this.$root.innerText\n  }\n\n  get x () { return parseInt(this.$root.style.left || '0') }\n\n  set x (x: number) { this.$root.style.left = x + 'px' }\n\n  get y () { return parseInt(this.$root.style.top || '0') }\n\n  set y (y: number) { this.$root.style.top = y + 'px' }\n}\n","import NP from 'number-precision'\nimport { ButtonAndLayer } from '@/player/buttonAndLayer'\nimport { Ui } from '@/player/ui'\nimport { IconButton } from '@/player/IconButton'\nimport { Toast } from '@/player/toast'\n\nNP.enableBoundaryChecking(false)\n\nexport class VolumeLayer extends ButtonAndLayer {\n  $video: HTMLVideoElement\n  $valueLabel: HTMLElement\n  $dragArea: HTMLElement\n  $controller: HTMLElement\n  btn: IconButton\n\n  $current: HTMLElement\n  volumeValue: number = 0\n  private areaHeight: number = 0\n  private toast: Toast\n  private hideToast: number = -1\n\n  constructor (ui: Ui) {\n    super(ui)\n    this.$video = this.player.$video\n    this.toast = new Toast(ui)\n    this.$video.addEventListener('volumechange', () => this.updateController())\n    this.$layer = this.player.$root.querySelector(\n      '.interactive-layer .volume-bar') as HTMLElement\n    this.$valueLabel = this.$layer.querySelector(\n      '.volume-num-label') as HTMLElement\n    this.$btn = this.player.$root.querySelector(\n      '.interactive-layer .buttons .button.volume') as HTMLElement\n    this.btn = new IconButton(this.$btn)\n    this.$btn.addEventListener('click', () => this.toggleMuted())\n    this.$dragArea = this.$layer.querySelector(\n      '.volume-column-bar') as HTMLElement\n    this.$controller = this.$dragArea.querySelector(\n      '.bar-controller') as HTMLElement\n    this.$current = this.$dragArea.querySelector('.bar-current') as HTMLElement\n    this.volumeValue = this.$video.volume = this.player.options.volume\n\n    if (this.volumeValue === 0) {\n      this.volumeValue = 0.7\n    }\n\n    const mousemoveControlVolume = (e: MouseEvent) => {\n      // console.log({ y })\n      let y = e.pageY\n      const rect = this.$dragArea.getBoundingClientRect()\n      if (y < rect.top) {\n        this.$video.volume = 1\n      } else if (y > rect.bottom) {\n        this.$video.volume = 0\n      } else {\n        const range = rect.bottom - rect.top\n        y -= rect.top\n        const value = y / range\n        this.$video.volume = NP.round(1 - value, 2)\n      }\n      this.volumeValue = this.$video.volume\n      this.updateController()\n    }\n    const mouseupReleaseControl = (e: MouseEvent) => {\n      document.removeEventListener('mousemove', mousemoveControlVolume)\n      document.removeEventListener('mouseup', mouseupReleaseControl)\n      mousemoveControlVolume(e)\n    }\n    this.$dragArea.addEventListener('mousedown', () => {\n      document.addEventListener('mousemove', mousemoveControlVolume)\n      document.addEventListener('mouseup', mouseupReleaseControl)\n    })\n\n    this.init()\n    this.updateController()\n  }\n\n  up () {\n    if (this.$video.volume <= 0.9) {\n      this.$video.volume = NP.plus(this.$video.volume, 0.1)\n    } else {\n      this.$video.volume = 1\n    }\n    this.volumeValue = this.$video.volume\n    this.showToast()\n  }\n\n  down () {\n    if (this.$video.volume >= 0.1) {\n      this.$video.volume = NP.minus(this.$video.volume, 0.1)\n    } else {\n      this.$video.volume = 0\n    }\n    this.volumeValue = this.$video.volume\n    this.showToast()\n  }\n\n  showToast () {\n    if (this.isShow) return\n    this.toast.show()\n    this.toast.text = this.ui.string.volume + '：' +\n      NP.round(this.$video.volume * 100, 0)\n    clearTimeout(this.hideToast)\n    this.hideToast = setTimeout(() => {\n      this.toast.hide()\n    }, 2000)\n    this.updateToastPosition()\n  }\n\n  updateToastPosition () {\n    this.toast.x = (this.player.width - this.toast.width) / 2\n    this.toast.y = (this.player.height - this.toast.height) / 2\n  }\n\n  toggleMuted () {\n    if (this.$video.volume > 0) {\n      this.$video.volume = 0\n    } else {\n      if (this.volumeValue === 0) {\n        this.$video.volume = 1\n      } else {\n        this.$video.volume = this.volumeValue\n      }\n    }\n    this.updateButton()\n  }\n\n  updateButton () {\n    let attr\n    // console.log('音量', this.$video.volume)\n    if (this.$video.volume > 0) {\n      attr = 'data-on'\n    } else {\n      attr = 'data-off'\n    }\n    this.btn.switch(attr)\n  }\n\n  updateController () {\n    const value = NP.round(this.$video.volume * 100, 0)\n    this.$valueLabel.innerText = value.toString()\n    let y = this.$video.volume * this.areaHeight\n    this.$current.style.height = y + 'px'\n    y = this.areaHeight - y\n    this.$controller.style.transform = `translateY(${y}px)`\n    this.updateButton()\n  }\n\n  showLayer () {\n    super.showLayer()\n    this.areaHeight = this.$dragArea.clientHeight\n    this.updateController()\n  }\n\n  update () {\n    this.btn.$root.setAttribute('title', this.ui.string.volume)\n    // this.$controller.style.background = this.$current.style.background = this.player.options.color\n    if (this.toast.isShow) this.updateToastPosition()\n    if (this.isShow) this.updateLayerPosition()\n  }\n}\n","import { ButtonAndLayer } from '@/player/buttonAndLayer'\nimport { Ui } from '@/player/ui'\nimport { VideoType } from '@/player/player'\nimport { QualityLevel } from '@/player/qualityLevelAdapter'\n\nexport class QualitySelector extends ButtonAndLayer {\n  private readonly autoLevel: QualityLevel\n  private readonly levels: QualityLevel[] = []\n  currentLevel = -1\n\n  constructor (ui: Ui) {\n    super(ui)\n    this.autoLevel = { selected: false, name: ui.string.autoQualitySelect, index: -1, bitrate: 0 }\n    this.$btn = this.player.$root.querySelector('.button.quality') as HTMLElement\n    this.$layer = this.player.$root.querySelector('.float.quality-menu') as HTMLElement\n    this.init()\n    this.$layer.addEventListener(this.player.clickEvent, (e: MouseEvent | TouchEvent) => {\n      console.log('level click 1', e.target)\n      const $item = e.target as HTMLElement\n      if ($item.hasAttribute('data-value')) {\n        const value = parseInt($item.getAttribute('data-value') as string)\n        console.log('level click 2', value)\n        this.levels.forEach(level => {\n          if (level.selected && level.index === this.currentLevel) return\n          level.selected = level.index === value\n          if (level.selected) {\n            this.emit('selectLevel', level)\n            this.currentLevel = value\n          }\n        })\n        this.updateButton()\n        this.hideLayer()\n      }\n    })\n  }\n\n  showLayer () {\n    super.showLayer()\n    this.updateLevelMenu()\n    this.updateLayerPosition()\n    this.updateButton()\n  }\n\n  updateButton () {\n    this.levels.every(level => {\n      if (level.selected) {\n        this.$btn.innerText = level.name\n      }\n      return !level.selected\n    })\n  }\n\n  reset () {\n    // console.error('qualitySelector reset')\n    this.levels.length = 0\n    this.currentLevel = -1\n    this.$layer.innerHTML = ''\n  }\n\n  updateLevelMenu () {\n    console.warn('updateLevelMenu')\n    // 清空菜单内容\n    this.$layer.innerHTML = ''\n    this.levels.forEach((level: QualityLevel) => {\n      const $item = document.createElement('div') as HTMLElement\n\n      if (level.index === this.currentLevel) {\n        $item.classList.add('current')\n      }\n      $item.innerText = level.name\n      $item.setAttribute('data-value', level.index.toString())\n      this.$layer.append($item)\n    })\n  }\n\n  updateLevel (levels: QualityLevel[]) {\n    this.levels.length = 0\n    this.levels.push(...levels.reverse(), this.autoLevel)\n    if (this.currentLevel === -1) {\n      this.autoLevel.selected = true\n    } else {\n      this.levels.every((level: QualityLevel) => {\n        level.selected = level.index === this.currentLevel\n      })\n    }\n    console.log('update level', this.levels)\n    this.updateLevelMenu()\n    this.updateLayerPosition()\n    this.updateButton()\n  }\n\n  update () {\n    this.$btn.style.display = this.player.type === VideoType.Normal ? 'none' : ''\n    this.autoLevel.name = this.ui.string.autoQualitySelect\n    this.updateLevelMenu()\n    this.updateButton()\n  }\n}\n","export function SecondsToString (seconds: number, format: string = 'hh:mm:ss'): string {\n  seconds = parseInt(seconds.toString(), 10)\n  let h = 0\n  let m = 0\n  let s = 0\n  if (seconds > 0) {\n    // 时\n    if (format.indexOf('h') > -1) h = Math.floor(seconds / 3600)\n    // 分\n    if (format.indexOf('m') > -1) m = Math.floor((seconds - (h * 3600)) / 60)\n    // 秒\n    s = seconds - (h * 3600) - (m * 60)\n  }\n  format = format\n    .split('hh').join(h.toString().padStart(2, '0'))\n    .split('h').join(h.toString())\n    .split('mm').join(m.toString().padStart(2, '0'))\n    .split('m').join(m.toString())\n    .split('ss').join(s.toString().padStart(2, '0'))\n    .split('s').join(s.toString())\n  return format\n}\n\nexport function LoadMimeType (url: string): Promise<string> {\n  return new Promise((resolve, reject) => {\n    const http = new XMLHttpRequest()\n    http.open('GET', url)\n    http.send()\n    http.onreadystatechange = () => {\n      if (http.readyState === XMLHttpRequest.HEADERS_RECEIVED) {\n        if (http.status === 200) {\n          const type = http.getResponseHeader('Content-Type')\n          if (type) {\n            resolve(type)\n          } else {\n            reject(new Error('No Content-Type'))\n          }\n        } else {\n          reject(new Error('Http Status Not 200, return:' + http.status))\n        }\n        http.abort()\n      }\n    }\n  })\n}\n\nexport function Hash (str: string) {\n  let hash = 0\n  let i\n  let chr\n  if (str.length === 0) return hash\n  for (i = 0; i < str.length; i++) {\n    chr = str.charCodeAt(i)\n    hash = ((hash << 5) - hash) + chr\n    hash |= 0 // Convert to 32bit integer\n  }\n  return hash\n}\n\nexport function RandomID (len: number = 6): string {\n  const ALPHABET = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'\n\n  let rtn = ''\n  for (let i = 0; i < len; i++) {\n    rtn += ALPHABET.charAt(Math.floor(Math.random() * ALPHABET.length))\n  }\n  return rtn\n}\n","import { Player } from '@/player/player'\nimport { Ui } from '@/player/ui'\nimport { SecondsToString } from '@/player/utils'\nimport { Toast } from '@/player/toast'\n\nexport class ProgressBar {\n  private player: Player\n  private ui: Ui\n  private readonly $root: HTMLElement\n  private $controller: HTMLElement\n  private $current: HTMLElement\n  private $buffer: HTMLElement\n  private $time: HTMLElement\n\n  private toast: Toast\n\n  private barWidth: number = 0\n  private _currentTime = 0\n  private percent = 0\n  private offsetWidth = 0\n\n  // 是否正在拖动进度条\n  private isDragging = false\n\n  constructor (ui: Ui) {\n    this.player = ui.player\n    this.ui = ui\n    this.toast = new Toast(ui)\n    this.$root = this.player.$root.querySelector('.progress-bar') as HTMLElement\n    this.$controller = this.$root.querySelector('.bar-controller') as HTMLElement\n    this.$current = this.$root.querySelector('.bar-current') as HTMLElement\n    this.$time = this.player.$root.querySelector('.controller-bottom-bar .time') as HTMLElement\n\n    this.$buffer = this.$root.querySelector('.bar-buffer') as HTMLElement\n    this.player.$video.addEventListener('timeupdate', () => {\n      this._currentTime = this.player.$video.currentTime\n      if (this.isDragging) return\n      this.percent = this._currentTime / this.player.$video.duration\n      if (isNaN(this.percent)) this.percent = 0\n      this.updateTime()\n      this.updateBar()\n    })\n    this.player.$video.addEventListener('progress', () => {\n      this.updateTime()\n      this.updateBufferBar()\n    })\n\n    this.resize()\n    this.initEventAboutController()\n    this.initEventAboutToast()\n    this.updateTime()\n  }\n\n  private initEventAboutController () {\n    const mouseMoveChangeTime = (e: MouseEvent) => {\n      const rect = this.$root.getBoundingClientRect()\n      const x = e.clientX - rect.left\n      this.percent = x / this.barWidth\n      if (isNaN(this.percent) || this.percent < 0) this.percent = 0\n      if (this.percent > 1) this.percent = 1\n      this.update()\n      this.ui.isMouseInUI = true\n    }\n    const mouseup = () => {\n      document.removeEventListener('mousemove', mouseMoveChangeTime)\n      document.removeEventListener('mouseup', mouseup)\n      this.isDragging = false\n      this.player.$video.currentTime = this.percent * this.player.$video.duration\n    }\n    this.$root.addEventListener('mousedown', () => {\n      this.isDragging = true\n      document.addEventListener('mousemove', mouseMoveChangeTime)\n      document.addEventListener('mouseup', mouseup)\n    })\n\n    this.$root.addEventListener('click', (e: MouseEvent) => {\n      mouseMoveChangeTime(e)\n      this.player.$video.currentTime = this.percent * this.player.$video.duration\n    })\n  }\n\n  private initEventAboutToast () {\n    let mouseenter = false\n    let mousedown = false\n    const mouseup = () => {\n      document.removeEventListener('mouseup', mouseup)\n      mousedown = false\n      hideToast()\n    }\n    const hideToast = () => {\n      if (!mouseenter && !mousedown) {\n        this.toast.hide()\n        document.removeEventListener('mousemove', mousemove)\n      }\n    }\n    const mousemove = (e: MouseEvent) => {\n      const playerRect = this.player.$root.getBoundingClientRect()\n      const rect = this.$root.getBoundingClientRect()\n      let x = e.clientX - rect.left\n      if (!this.ui.isShow) x -= this.offsetWidth / 2\n      const percent = x / this.barWidth\n      if (isNaN(percent) || percent < 0) this.percent = 0\n      if (this.percent > 1) this.percent = 1\n      this.toast.text = SecondsToString(percent * this.player.$video.duration)\n      if (x < 0) {\n        x = 0\n      } else if (x + this.toast.width > this.player.width) {\n        x = this.player.width - this.toast.width\n      }\n\n      this.toast.x = x\n      this.toast.y = rect.top - playerRect.top - 50\n    }\n\n    this.$root.addEventListener('mousedown', () => {\n      this.toast.show()\n      mousedown = true\n      document.addEventListener('mouseup', mouseup)\n      document.addEventListener('mousemove', mousemove)\n    })\n\n    this.$root.addEventListener('mouseenter', () => {\n      this.toast.show()\n      mouseenter = true\n      document.addEventListener('mousemove', mousemove)\n    })\n    this.$root.addEventListener('mouseleave', () => {\n      mouseenter = false\n      hideToast()\n    })\n  }\n\n  private updateTime () {\n    // console.warn('updateTime')\n    if (!this.player.options.live) {\n      this.$time.innerText = SecondsToString(this.player.$video.currentTime, this.player.options.timeFormat) +\n        ' / ' + SecondsToString(this.player.$video.duration, this.player.options.timeFormat)\n    }\n  }\n\n  init () {\n    this.offsetWidth = this.player.width - this.$root.offsetWidth\n  }\n\n  resize () {\n    this.barWidth = this.player.width - this.offsetWidth\n    // console.warn('resize', this.player.width, this.offsetWidth, this.barWidth)\n    this.updateBar()\n    this.updateBufferBar()\n  }\n\n  update () {\n    // console.warn('update')\n    // console.warn('进度条 update', this.ui.isShow)\n    // this.$controller.style.background = this.player.options.color\n    // this.$current.style.background = this.player.options.color\n    if (this.player.options.live) {\n      this.$time.innerText = this.ui.string.live\n    }\n  }\n\n  reset () {\n    this.resetTimeZone()\n    this.resetProgressBar()\n  }\n\n  private updateBar () {\n    // console.warn('updateBar')\n    if (this.ui.isShow) {\n      this.barWidth = this.player.width - this.offsetWidth\n    } else {\n      this.barWidth = this.player.width\n    }\n    const x = this.barWidth * this.percent\n    this.$current.style.width = x + 'px'\n    this.$controller.style.transform = `translateX(${x}px)`\n  }\n\n  resetTimeZone () {\n    if (this.player.options.live) {\n      this.$time.innerText = '直播'\n    } else {\n      this.$time.innerText = SecondsToString(0) + ' / ' + SecondsToString(0)\n    }\n  }\n\n  resetProgressBar () {\n    this.percent = 0\n    this.$buffer.style.width = 0 + 'px'\n    this.update()\n  }\n\n  updateBufferBar () {\n    // console.warn('updateBufferBar')\n    for (let i = 0; i < this.player.$video.buffered.length; i++) {\n      const start = this.player.$video.buffered.start(i)\n      const end = this.player.$video.buffered.end(i)\n      // if (start < this._currentTime && this._currentTime < end) {\n        this.$buffer.style.width = end / this.player.$video.duration * this.barWidth + 'px'\n      // }\n    }\n  }\n}\n","export enum DanmakuType {\n  Top,\n  Flow,\n  Bottom\n}\n\ninterface iDanmakuContextMeuEvent {\n  readonly danmaku: Danmaku\n}\n\ndeclare var DanmakuContextMeuEvent: {\n  prototype: iDanmakuContextMeuEvent;\n  new (type: string, eventInitDict?: MouseEventInit): MouseEvent;\n}\n\nexport interface DanmakuOptions {\n  // 视频进度\n  currentTime: number\n  type: DanmakuType\n  borderColor: string\n  fill: string\n  id: string | number\n  fontSize: string | number,\n}\n\nexport function MakeDanmakuOptions ({\n  currentTime = 0,\n  borderColor = '',\n  fill = '#ffffff',\n  type = DanmakuType.Flow,\n  id = '',\n  fontSize = 28\n}: Partial<DanmakuOptions>): DanmakuOptions {\n  return { currentTime, type, borderColor, fill, id, fontSize }\n}\n\nexport class Danmaku implements DanmakuOptions {\n  text: string\n  borderColor!: string\n  currentTime!: number\n  fill!: string\n  type!: DanmakuType\n  id!: string\n  fontSize!: string | number\n\n  constructor (text: string, options?: Partial<DanmakuOptions>) {\n    this.text = text\n    Object.assign(this, MakeDanmakuOptions(options || {}))\n  }\n}\n","import { Danmaku } from '@/player/danmaku/danmaku'\n\nconst font = 'px \"Hiragino Sans GB\", \"Microsoft YaHei\", \"WenQuanYi Micro Hei\", sans-serif'\n\nexport class DanmakuDrawer {\n  selfCanvas: HTMLCanvasElement\n  ctx: CanvasRenderingContext2D\n  danmaku!: Danmaku\n  top: number = 0\n  left: number = 0\n  width: number = 0\n  height: number = 0\n\n  enable: boolean = false\n\n  constructor () {\n    this.selfCanvas = document.createElement('canvas')\n    this.selfCanvas.width = 100\n    this.selfCanvas.height = 100\n    this.ctx = this.selfCanvas.getContext('2d') as CanvasRenderingContext2D\n  }\n\n  protected getSize () {\n    this.ctx.textBaseline = 'top'\n    this.ctx.textAlign = 'left'\n    this.ctx.font = this.danmaku.fontSize + font\n    this.width = Math.round(this.ctx.measureText(this.danmaku.text).width)\n    this.height = Math.round(this.ctx.measureText('M').width * 1.2)\n  }\n\n  protected draw () {\n    const width = this.width + 4\n    const height = this.height\n    this.selfCanvas.width = width\n    this.selfCanvas.height = height\n    this.ctx.textBaseline = 'top'\n    this.ctx.textAlign = 'left'\n    this.ctx.font = this.danmaku.fontSize + font\n    this.ctx.clearRect(0, 0, width, height)\n    if (this.danmaku.borderColor) {\n      this.ctx.lineWidth = 1\n      this.ctx.strokeStyle = this.danmaku.borderColor\n      this.ctx.strokeRect(1, 1, width - 4, height - 4)\n    }\n    // 字体描边，因为有锯齿而不使用\n    // this.ctx.lineWidth = 2\n    // this.ctx.strokeStyle = '#000000'\n    // this.ctx.strokeText(this.danmaku.text, 1, 1)\n    this.ctx.shadowBlur = 2\n    this.ctx.shadowColor = 'black'\n    this.ctx.fillStyle = this.danmaku.fill\n    this.ctx.fillText(this.danmaku.text, 1, 1)\n  }\n}\n\nexport class DanmakuFlowDrawer extends DanmakuDrawer {\n  set (danmaku: Danmaku, left: number, top: number) {\n    this.danmaku = danmaku\n    this.enable = true\n    this.left = left\n    this.top = top\n    this.getSize()\n    this.draw()\n  }\n\n  update (canvasWidth: number, duration: number, lastFrameTime: number) {\n    const speed = (canvasWidth + this.width) / duration * lastFrameTime\n    this.left = this.left - speed\n    this.enable = (this.left + this.width) > 0\n  }\n}\n\nexport class DanmakuFixedDrawer extends DanmakuDrawer {\n  timeout: number = 0\n\n  set (danmaku: Danmaku, timeout: number, canvasWidth: number, top: number) {\n    this.danmaku = danmaku\n    this.timeout = timeout\n    this.enable = true\n    this.getSize()\n    this.left = (canvasWidth - this.width) / 2\n    this.top = top\n    this.draw()\n    this.update(0)\n  }\n\n  update (lastFrameTime: number) {\n    this.timeout -= lastFrameTime\n    this.enable = this.timeout > 0\n  }\n}\n","import { Player } from '@/player/player'\nimport { DanmakuDrawer } from '@/player/danmaku/danmakuDrawer'\n\nconst font = 'px \"Hiragino Sans GB\", \"Microsoft YaHei\", \"WenQuanYi Micro Hei\", sans-serif'\n\nexport class Canvas {\n  private player: Player\n  $canvas: HTMLCanvasElement\n  private ctx: CanvasRenderingContext2D\n\n  private caches: DanmakuDrawer[] = []\n\n  constructor (player: Player) {\n    this.player = player\n    this.$canvas = player.$root.querySelector('canvas') as HTMLCanvasElement\n    this.ctx = this.$canvas.getContext('2d') as CanvasRenderingContext2D\n\n    this.$canvas.addEventListener(player.clickEvent, () => {\n      if (this.player.ui.isShow) player.toggle()\n    })\n  }\n\n  addDrawer (drawer: DanmakuDrawer) {\n    this.caches.push(drawer)\n  }\n\n  removeDrawer (drawer: DanmakuDrawer) {\n    const index = this.caches.indexOf(drawer)\n    if (index > -1) this.caches.splice(index, 1)\n  }\n\n  clear () {\n    this.ctx.clearRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height)\n  }\n\n  renderAll () {\n    if (this.caches.length > 0) {\n      for (let i = 0; i < this.caches.length; i++) {\n        const drawer = this.caches[i]\n        this.ctx.drawImage(drawer.selfCanvas, drawer.left, drawer.top)\n      }\n    }\n  }\n\n  clearCache () {\n    this.caches.length = 0\n  }\n\n  set alpha (val: number) {\n    this.ctx.globalAlpha = val\n  }\n\n  get alpha () {\n    return this.ctx.globalAlpha\n  }\n\n  fontHeight (fontSize: number): number {\n    this.ctx.font = fontSize + font\n    const size = this.ctx.measureText('M')\n    return size.width * 1.2\n  }\n\n  resize () {\n    this.$canvas.setAttribute('width', this.player.width + 'px')\n    this.$canvas.setAttribute('height', this.player.height + 'px')\n  }\n}\n","import { Player } from '@/player/player'\nimport { Danmaku, DanmakuType } from '@/player/danmaku/danmaku'\nimport { DanmakuDrawer, DanmakuFixedDrawer, DanmakuFlowDrawer, } from './danmakuDrawer'\nimport { EventEmitter } from 'events'\nimport { Canvas } from '@/player/danmaku/canvas'\n\nexport enum LimitType {\n  UnLimited = 'unLimited', // 不限\n  UnOverlap = 'unOverlap', // 防重叠\n  Percent25 = 'percent25', // 25%屏显示弹幕\n  Half = 'half', // 50%屏显示弹幕\n  Percent75 = 'percent75', // 75%屏显示弹幕\n}\n\nexport interface DanmakuLayerOptions {\n  // 弹幕层的弹幕文字透明度，0~1，默认为1\n  alpha: number\n  // 是否显示弹幕层，默认为true\n  enable: boolean\n  // 流式弹幕的时间，毫秒\n  flowDuration: number\n  // 固定式弹幕的时间，毫秒\n  fadeoutDuration: number,\n  // 弹幕的字体大小\n  fontSize: number,\n  // 弹幕的显示区域限制\n  limit: LimitType // 防重叠选项\n  // 弹幕的右键菜单\n  contextMenu: ((danmaku: Danmaku) => { [name: string]: () => void }) | undefined\n}\n\nexport function MakeDanmakuLayerOptions ({\n  alpha = 1,\n  enable = true,\n  flowDuration = 8,\n  fadeoutDuration = 5,\n  fontSize = 28,\n  limit = LimitType.UnOverlap,\n  contextMenu = undefined,\n}: Partial<DanmakuLayerOptions> = {}): DanmakuLayerOptions {\n  return {\n    alpha,\n    enable,\n    flowDuration,\n    fontSize,\n    limit,\n    fadeoutDuration,\n    contextMenu,\n  }\n}\n\nconst template = '<div class=\"content\"></div><div class=\"buttons\"></div>'\n\nfunction MakeDanmakuDrawerMenu (\n  d: DanmakuDrawer,\n  menus: { [p: string]: () => void },\n): HTMLDivElement {\n  const $div = document.createElement('div')\n  $div.innerHTML = template\n  const $content = $div.querySelector('.content') as HTMLElement\n  $content.innerText = d.danmaku.text\n  const $buttons = $div.querySelector('.buttons') as HTMLDivElement\n  for (const key in menus) {\n    const $span = document.createElement('span')\n    $span.innerText = key\n    $span.addEventListener('click', menus[key])\n    $buttons.prepend($span)\n  }\n  return $div\n}\n\nfunction copyText (text: string) {\n  const el = document.createElement('textarea')\n  el.value = text\n  document.body.appendChild(el)\n  el.select()\n  document.execCommand('copy')\n  document.body.removeChild(el)\n}\n\nexport class DanmakuLayer {\n  private player: Player\n  private readonly canvas: Canvas\n  private $menu!: HTMLElement\n\n  // 弹幕内容池\n  danmakus: Danmaku[] = []\n  showed: Danmaku[] = []\n\n  // 池\n  topEnables: DanmakuFixedDrawer[] = []\n  topAndBottomDisables: DanmakuFixedDrawer[] = []\n  bottomEnables: DanmakuFixedDrawer[] = []\n  flowEnables: DanmakuFlowDrawer[] = []\n  flowDisables: DanmakuFlowDrawer[] = []\n  private readonly lineHeights: number[] = []\n  private readonly topLines: { [height: string]: DanmakuDrawer | null } = {}\n  private readonly bottomLines: { [height: string]: DanmakuDrawer | null } = {}\n  private readonly flowLines: { [height: string]: DanmakuDrawer | null } = {}\n  private displayArea: number = 0\n\n  private topLineIndex = 0\n  private flowY = 0\n  private bottomY = 0\n\n  // 上一帧的生成时间\n  private frameTime: number = 0\n  // 计算弹幕坐标的时间\n  private updateDanmakuTime: number = 0\n\n  isShow = true\n\n  private width = 0\n  private height = 0\n  private calcTopInterval: number = -1\n  private destroied: boolean = false\n\n  private event: EventEmitter\n  private addDanmakuToCanvasTime: number = 0\n  private lastFrame: number = 0\n  private lineHeight!: number\n\n  constructor (player: Player) {\n    // @ts-ignore\n    window.danmaku = this\n    this.player = player\n    this.event = new EventEmitter()\n\n    this.canvas = new Canvas(player)\n\n    const hideMenu = () => {\n      document.removeEventListener('click', hideMenu)\n      document.removeEventListener('contextmenu', hideMenu)\n      this.$menu.remove()\n    }\n\n    this.canvas.$canvas.addEventListener('contextmenu', (e: MouseEvent) => {\n      const found = this.findDrawers(e)\n      if (found.length > 0) {\n        this.createDanmakuMenu(found)\n\n        let x = e.pageX\n        let y = e.pageY\n        const right = e.clientX + this.$menu.clientWidth\n        const bottom = e.clientY + this.$menu.clientHeight\n\n        if (right > document.body.clientWidth) {\n          x -= right - document.body.clientWidth\n        }\n        if (bottom > document.body.clientHeight) {\n          y -= bottom - document.body.clientHeight\n        }\n        this.$menu.style.left = x + 'px'\n        this.$menu.style.top = y + 'px'\n        document.addEventListener('click', hideMenu)\n        document.addEventListener('touchstart', hideMenu)\n        document.addEventListener('contextmenu', hideMenu)\n      }\n      e.preventDefault()\n      e.stopPropagation()\n    })\n    this.canvas.$canvas.addEventListener('dblclick', () => {\n      this.player.toggleFullScreen()\n    })\n\n    this.player.$video.addEventListener('seeked', () => {\n      this.clear()\n    })\n\n    this.loop()\n  }\n\n  private createDanmakuMenu (drawers: DanmakuDrawer[]) {\n    if (this.$menu) this.$menu.remove()\n    this.$menu = document.createElement('div')\n    this.$menu.classList.add('danplayer-danmaku-context-menu')\n    for (let i = 0; i < drawers.length; i++) {\n      const drawer = drawers[i]\n      if (this.player.options.danmaku.contextMenu) {\n        const menus = this.player.options.danmaku.contextMenu(drawer.danmaku)\n        menus[this.player.options.ui.copy] = () => {\n          console.log('复制按钮', drawer.danmaku.text)\n          copyText(drawer.danmaku.text)\n        }\n        const $menu = MakeDanmakuDrawerMenu(drawer, menus)\n        this.$menu.append($menu)\n      }\n    }\n    document.body.append(this.$menu)\n  }\n\n  show () {\n    this.isShow = true\n  }\n\n  hide () {\n    this.isShow = false\n  }\n\n  clear () {\n    this.showed.length = 0\n    this.canvas.clear()\n    this.canvas.clearCache()\n    this.topAndBottomDisables.push(...this.topEnables)\n    this.topAndBottomDisables.push(...this.bottomEnables)\n    this.topEnables.length = 0\n    this.bottomEnables.length = 0\n    this.flowDisables.push(...this.flowEnables)\n    this.flowEnables.length = 0\n    for (const key in this.flowLines) this.flowLines[key] = null\n    for (const key in this.topLines) this.topLines[key] = null\n    for (const key in this.bottomLines) this.bottomLines[key] = null\n  }\n\n  resize () {\n    this.width = this.player.$root.clientWidth\n    this.height = this.player.$root.clientHeight\n    this.lineHeight = Math.round(\n      this.canvas.fontHeight(this.player.options.danmaku.fontSize))\n\n    this.lineHeights.length = 0\n    // 每次resize都计算屏幕最大行数，因为有可能在多个不同分辨率的屏幕切换\n    for (let y = 0; y < window.screen.height; y++) {\n      const height = y * this.lineHeight\n      if (height > window.screen.height) break\n      this.lineHeights.push(height)\n\n      if (!Object.prototype.hasOwnProperty.call(this.topLines, height)) {\n        this.topLines[height] = null\n      }\n      if (!Object.prototype.hasOwnProperty.call(this.bottomLines, height)) {\n        this.bottomLines[height] = null\n      }\n      if (!Object.prototype.hasOwnProperty.call(this.flowLines, height)) {\n        this.flowLines[height] = null\n      }\n    }\n\n    this.canvas.resize()\n\n    // 检查限高\n    const limit = this.player.options.danmaku.limit\n    if (limit === LimitType.Percent75) {\n      this.displayArea = this.player.height * 0.75\n    } else if (limit === LimitType.Half) {\n      this.displayArea = this.player.height * 0.5\n    } else if (limit === LimitType.Percent25) {\n      this.displayArea = this.player.height * 0.25\n    } else {\n      this.displayArea = this.player.height\n    }\n    console.log('弹幕层 displayArea', this.displayArea)\n\n    this.canvas.alpha = this.player.options.danmaku.alpha\n    this.canvas.clear()\n    this.canvas.renderAll()\n  }\n\n  toggle (): void {\n    if (this.isShow) {\n      this.hide()\n    } else {\n      this.show()\n    }\n  }\n\n  send (d: Danmaku) {\n    d.text = d.text.trim()\n    this.danmakus.push(d)\n  }\n\n  private findDrawers (e: MouseEvent): DanmakuDrawer[] {\n    return [\n      ...this.topEnables.filter(drawer => DanmakuLayer.find(e, drawer)),\n      ...this.bottomEnables.filter(drawer => DanmakuLayer.find(e, drawer)),\n      ...this.flowEnables.filter(drawer => DanmakuLayer.find(e, drawer)),\n    ]\n  }\n\n  private static find (e: MouseEvent, drawer: DanmakuDrawer): boolean {\n    if (e.offsetX > drawer.left && e.offsetX < (drawer.left + drawer.width)) {\n      if (e.offsetY > drawer.top && e.offsetY < (drawer.top + drawer.height)) {\n        return true\n      }\n    }\n    return false\n  }\n\n  private createDrawer (danmaku: Danmaku) {\n    let top\n    if (danmaku.type === DanmakuType.Flow) {\n      const drawer = this.flowDisables.shift() || new DanmakuFlowDrawer()\n      top = this.calcFlowY()\n      if (top > -1) {\n        drawer.enable = true\n        drawer.set(danmaku, this.width, top)\n        drawer.update(this.width, this.player.options.danmaku.flowDuration, 0)\n        this.flowEnables.push(drawer)\n        this.flowLines[top] = drawer\n        this.canvas.addDrawer(drawer)\n      } else {\n        this.flowDisables.push(drawer)\n      }\n    } else {\n      const drawer = this.topAndBottomDisables.shift() ||\n        new DanmakuFixedDrawer()\n      if (danmaku.type === DanmakuType.Top) {\n        top = this.calcTopY()\n        if (top > -1) {\n          drawer.enable = true\n          drawer.set(danmaku, this.player.options.danmaku.fadeoutDuration,\n            this.width, top)\n          this.topLines[top] = drawer\n          console.log('渲染', top, danmaku.text)\n          drawer.update(0)\n          this.topEnables.push(drawer)\n          this.canvas.addDrawer(drawer)\n        } else {\n          this.topAndBottomDisables.push(drawer)\n        }\n      } else {\n        let top = this.calcBottomY()\n        if (top > -1) {\n          drawer.enable = true\n          this.bottomLines[top] = drawer\n          top = this.height - (top + this.lineHeight)\n          drawer.set(danmaku, this.player.options.danmaku.fadeoutDuration,\n            this.width, top)\n          this.bottomEnables.push(drawer)\n          drawer.update(0)\n          this.canvas.addDrawer(drawer)\n        } else {\n          this.topAndBottomDisables.push(drawer)\n        }\n      }\n    }\n  }\n\n  private addDanmakuToCanvas () {\n    if (this.danmakus.length === 0 ||\n      !this.player.options.danmaku.enable) return\n    // 直播\n    if (this.player.options.live) {\n      this.danmakus.forEach(danmaku => {\n        this.createDrawer(danmaku)\n      })\n      this.danmakus.length = 0\n    } else { // VOD\n      for (let i = 0; i < this.danmakus.length; i++) {\n        const danmaku = this.danmakus[i]\n        if (this.showed.includes(danmaku)) continue\n        const time = Math.abs(this.player.currentTime - danmaku.currentTime)\n        if (time > 0.1) continue\n        this.showed.push(danmaku)\n        this.createDrawer(danmaku)\n      }\n    }\n    this.canvas.renderAll()\n  }\n\n  private calcFlowY (): number {\n    for (const key in this.flowLines) {\n      const _d = this.flowLines[key]\n\n      if (_d && _d.enable) {\n        const right = _d.left + _d.width\n        if (right > this.width) continue\n      }\n\n      const height = Number(key)\n      if (height > this.displayArea) break\n      console.log('发现空行', key)\n      this.flowY = height\n      return height\n    }\n    if (this.player.options.danmaku.limit !== LimitType.UnLimited) {\n      return -1\n    }\n    // 无限制，就可以重复将新的弹幕显示到屏幕上\n    this.flowY += this.lineHeight\n    if (this.flowY > this.displayArea) this.flowY = 0\n    return this.flowY\n  }\n\n  private calcTopY (): number {\n    for (const key in this.topLines) {\n      const _d = this.topLines[key]\n      const height = Number(key)\n      if (_d && _d.enable) continue\n      if (height > this.displayArea) break\n      this.topLineIndex = height\n      return height\n    }\n    if (this.player.options.danmaku.limit !== LimitType.UnLimited) {\n      return -1\n    }\n    // 无限制，就可以重复将新的弹幕显示到屏幕上\n    this.topLineIndex += this.lineHeight\n    if (this.topLineIndex > this.displayArea) {\n      this.topLineIndex = 0\n    }\n    return this.topLineIndex\n  }\n\n  private calcBottomY (): number {\n    if (this.player.options.danmaku.limit === LimitType.Percent25 ||\n      this.player.options.danmaku.limit === LimitType.Half ||\n      this.player.options.danmaku.limit === LimitType.Percent75) {\n      return -1\n    }\n    for (const key in this.bottomLines) {\n      const _d = this.bottomLines[key]\n      const height = Number(key)\n      if (_d && _d.enable) continue\n      if (height > this.displayArea) break\n      console.log('发现空行', key)\n      this.bottomY = height\n      return height\n    }\n    if (this.player.options.danmaku.limit !== LimitType.UnLimited) {\n      return -1\n    }\n    // 无限制，就可以重复将新的弹幕显示到屏幕上\n    this.bottomY += this.lineHeight\n    if (this.bottomY > this.displayArea) {\n      this.bottomY = 0\n    }\n    return this.bottomY\n  }\n\n  /**\n   * 绘制弹幕\n   */\n  private updateDanmaku () {\n    this.topEnables = this.topEnables.filter(drawer => {\n      if (drawer.enable) {\n        drawer.update(this.frameTime)\n        return true\n      } else {\n        console.log('topLines', drawer.height, this.topLines[drawer.height],\n          this.topLines[drawer.height] === drawer)\n        if (this.topLines[drawer.height] === drawer) {\n          this.topLines[drawer.height] = null\n        }\n        this.canvas.removeDrawer(drawer)\n        this.topAndBottomDisables.push(drawer)\n        return false\n      }\n    })\n\n    this.bottomEnables = this.bottomEnables.filter(drawer => {\n      if (drawer.enable) {\n        drawer.update(this.frameTime)\n        return true\n      } else {\n        if (this.bottomLines[drawer.height] === drawer) {\n          this.bottomLines[drawer.height] = null\n        }\n        this.canvas.removeDrawer(drawer)\n        this.topAndBottomDisables.push(drawer)\n        return false\n      }\n    })\n\n    this.flowEnables = this.flowEnables.filter(drawer => {\n      if (drawer.enable) {\n        drawer.update(this.width, this.player.options.danmaku.flowDuration,\n          this.frameTime)\n        return true\n      } else {\n        if (this.flowLines[drawer.height] === drawer) {\n          this.flowLines[drawer.height] = null\n        }\n        this.canvas.removeDrawer(drawer)\n        this.flowDisables.push(drawer)\n        return false\n      }\n    })\n  }\n\n  update () {\n    if (this.player.options.danmaku.enable && this.isShow) {\n      console.log('显示弹幕')\n      this.show()\n    } else {\n      console.log('隐藏弹幕')\n      this.hide()\n    }\n  }\n\n  private loop () {\n    if (this.destroied) return\n    this.addDanmakuToCanvas()\n    this.addDanmakuToCanvasTime = (Date.now() - this.lastFrame) / 1000\n    this.canvas.clear()\n\n    if (!this.player.paused) {\n      this.updateDanmaku()\n      this.updateDanmakuTime = (Date.now() - this.lastFrame) / 1000\n    }\n    if (this.player.options.danmaku.enable && this.isShow) {\n      this.canvas.renderAll()\n    }\n    this.frameTime = (Date.now() - this.lastFrame) / 1000\n    this.lastFrame = Date.now()\n    window.requestAnimationFrame(() => { this.loop() })\n  }\n\n  destroy () {\n    this.destroied = true\n    clearInterval(this.calcTopInterval)\n    if (this.$menu) {\n      this.$menu.remove()\n    }\n  }\n\n  get debug (): Object {\n    return {\n      enable: this.player.options.danmaku.enable,\n      isShow: this.isShow,\n      all: this.danmakus.length,\n      showed: this.showed.length,\n      // 耗时\n      time: {\n        addDanmakuToCanvas: this.addDanmakuToCanvasTime,\n        drawDanmaku: this.updateDanmakuTime,\n        frameTime: this.frameTime,\n      },\n      'on screen danmakus': {\n        top: this.topEnables.length,\n        bottom: this.bottomEnables.length,\n        flow: this.flowEnables.length,\n      },\n      'danmaku pool': {\n        fixed: this.topAndBottomDisables.length,\n        flow: this.flowDisables.length,\n      },\n      positionY: {\n        top: this.topLineIndex,\n        flow: this.flowY,\n        bottom: this.bottomY,\n      },\n    }\n  }\n}\n","import { ButtonAndLayer } from '@/player/buttonAndLayer'\nimport { Ui } from '@/player/ui'\nimport { DanmakuOptions, DanmakuType } from '@/player/danmaku/danmaku'\n\nconst template =\n  `<div><span class=\"danmaku-type\"></span>\n<div class=\"types\">\n  <div class=\"type\" data-type=\"1\">\n    <div>\n        <svg class=\"icon\"><use xlink:href=\"#danplayer-danmugundongkai\"></use></svg>\n    </div>\n    <span class=\"danmaku-type-flow\"></span>\n  </div>\n  <div class=\"type\" data-type=\"0\">\n    <div>\n        <svg class=\"icon\"><use xlink:href=\"#danplayer-danmudingbukai\"></use></svg>\n    </div>\n    <span class=\"danmaku-type-top\"></span>\n  </div>\n  <div class=\"type\" data-type=\"2\">\n    <div>\n        <svg class=\"icon\"><use xlink:href=\"#danplayer-danmudibukai\"></use></svg>\n    </div>\n    <span class=\"danmaku-type-bottom\"></span>\n  </div>\n</div>\n</div>\n<div><span class=\"danmaku-color\"></span>\n<div class=\"colors\">\n{colors}\n</div>\n</div>`\n\nexport class DanmakuStyleLayer extends ButtonAndLayer {\n  private readonly $types: Element[]\n  private readonly $colors: Element[]\n  fill: string = '#ffffff'\n  type: DanmakuType = DanmakuType.Flow\n  static readonly colors = [\n    '#FE0302', '#FF7204', '#FFAA02', '#FFD302', '#FFFF00', '#A0EE00', '#00CD00',\n    '#019899', '#4266BE', '#89D5FF', '#CC0273', '#222222', '#9B9B9B', '#FFFFFF'\n  ]\n\n  constructor (ui: Ui) {\n    super(ui)\n    this.$layer = this.player.$root.querySelector('.float.danmaku-style-layer') as HTMLElement\n    this.$btn = this.player.$root.querySelector('.intern-button.danmaku-style') as HTMLElement\n    this.$layer.innerHTML = template.replace('{colors}',\n      DanmakuStyleLayer.colors.map(color => `<span style=\"background: ${color}\" data-color=\"${color}\"></span>`).join(''))\n\n    this.init()\n\n    this.$types = Array.from(this.$layer.querySelectorAll<Element>('.types > .type'))\n    this.$colors = Array.from(this.$layer.querySelectorAll<Element>('.colors > span'))\n\n    this.$types.forEach($dom => $dom.addEventListener('click', () => {\n      this.$types.forEach($dom => $dom.classList.remove('selected'))\n      $dom.classList.add('selected')\n      this.type = Number($dom.getAttribute('data-type'))\n    }))\n\n    this.$colors.forEach($dom => $dom.addEventListener('click', () => {\n      this.$colors.forEach($dom => $dom.classList.remove('selected'))\n      $dom.classList.add('selected')\n      this.fill = $dom.getAttribute('data-color') as string\n    }))\n\n    this.$types[0].classList.add('selected')\n    this.$colors[this.$colors.length - 1].classList.add('selected')\n\n    this.update()\n  }\n\n  public getStyle (): Partial<DanmakuOptions> {\n    return { fill: this.fill, type: this.type, borderColor: 'white' }\n  }\n\n  public update () {\n    const $type = this.$layer.querySelector('.danmaku-type') as HTMLElement\n    const $typeFlow = this.$layer.querySelector('.danmaku-type-flow') as HTMLElement\n    const $typeTop = this.$layer.querySelector('.danmaku-type-top') as HTMLElement\n    const $typeBottom = this.$layer.querySelector('.danmaku-type-bottom') as HTMLElement\n    const $color = this.$layer.querySelector('.danmaku-color') as HTMLElement\n\n    $color.innerText = this.ui.string.danmakuColor\n    $type.innerText = this.ui.string.danmakuType\n    $typeFlow.innerText = this.ui.string.danmakuTypeFlow\n    $typeTop.innerText = this.ui.string.danmakuTypeTopFixed\n    $typeBottom.innerText = this.ui.string.danmakuTypeBottomFixed\n\n    console.log('update style layer', $color)\n  }\n}\n","import { Ui } from '@/player/ui'\nimport { DanmakuStyleLayer } from '@/player/danmaku/danmakuStyleLayer'\nimport { Danmaku } from '@/player/danmaku/danmaku'\n\nexport class DanmakuForm {\n  ui: Ui\n  $root: HTMLElement\n  $btn: HTMLElement\n  $input: HTMLInputElement\n  isShow = false\n  styleLayer: DanmakuStyleLayer\n\n  constructor (ui: Ui) {\n    this.ui = ui\n    this.styleLayer = new DanmakuStyleLayer(ui)\n\n    this.$root = ui.player.$root.querySelector('.danmaku-form') as HTMLElement\n    this.$input = this.$root.querySelector('input') as HTMLInputElement\n    this.$btn = this.$root.querySelector('.send') as HTMLElement\n    this.$btn.addEventListener('click', () => this.send())\n\n    // 停止一切按键冒泡\n    this.$input.addEventListener('keypress', (e: KeyboardEvent) => {\n      if (e.key === 'Enter' && this.ui.isShow) {\n        this.send()\n        this.ui.hide()\n        this.$root.focus()\n      }\n      e.stopPropagation()\n    })\n    this.$input.addEventListener('keyup', (e: KeyboardEvent) => {\n      e.stopPropagation()\n    })\n    this.$input.addEventListener('keydown', (e: KeyboardEvent) => {\n      if (e.key === 'Escape') {\n        this.$root.focus()\n        this.ui.hide()\n      }\n      e.stopPropagation()\n    })\n\n    this.$input.addEventListener('focus', () => { this.ui.isMouseInUI = true })\n    this.$input.addEventListener('blur', () => { this.ui.isMouseInUI = false })\n  }\n\n  async send () {\n    const text = this.$input.value.trim()\n    if (!text) return\n    const options = this.styleLayer.getStyle()\n    options.currentTime = this.ui.player.currentTime\n\n    const danmaku = new Danmaku(text, options)\n    if (this.ui.player.options.beforeSendDanmaku) {\n      const success = await Promise.resolve(this.ui.player.options.beforeSendDanmaku(danmaku))\n      if (!success) {\n        return\n      }\n    }\n    this.ui.danmakuLayer.send(danmaku)\n    this.$input.value = ''\n  }\n\n  show () {\n    this.isShow = true\n    this.$root.style.display = ''\n  }\n\n  hide () {\n    this.isShow = false\n    this.$root.style.display = 'none'\n  }\n\n  update () {\n    this.$btn.innerText = this.ui.string.danmakuSend\n    this.$input.placeholder = this.ui.string.danmakuInputHint\n    if (this.ui.player.options.danmakuForm) {\n      this.show()\n    } else {\n      this.hide()\n    }\n  }\n\n  focus () {\n    this.$input.focus()\n  }\n}\n","import { Player } from '@/player/player'\nimport { VolumeLayer } from '@/player/volumeLayer'\nimport { QualitySelector } from '@/player/qualitySelector'\nimport { ProgressBar } from '@/player/progressBar'\nimport { DanmakuLayer } from '@/player/danmaku/danmakuLayer'\nimport { DanmakuStyleLayer } from '@/player/danmaku/danmakuStyleLayer'\nimport { DanmakuForm } from '@/player/danmaku/danmakuForm'\nimport { IconButton } from '@/player/IconButton'\n\nexport class UiString {\n  live = '直播'\n  play = '播放'\n  pause = '暂停'\n  volume = '音量'\n  danmakuInputHint = '输入弹幕内容'\n  danmakuSend = '发送'\n  danmakuType = '类型'\n  danmakuTypeFlow = '流动'\n  danmakuTypeTopFixed = '顶部'\n  danmakuTypeBottomFixed = '底部'\n  danmakuColor = '颜色'\n  fullscreen = '全屏观看'\n  cancelFullscreen = '取消全屏'\n  switchQuality = '切换画质'\n  showDanmaku = '显示弹幕'\n  hideDanmaku = '隐藏弹幕'\n  autoQualitySelect = '自动'\n  copy = '复制'\n  loading = '读取中'\n  pictureInPictureOn = '开启画中画'\n  pictureInPictureOff = '退出画中画'\n}\n\nexport class Ui {\n  qualitySelector: QualitySelector\n\n  private _isMouseInUI: boolean = false\n  danmakuLayer: DanmakuLayer\n  player: Player\n  isShow: boolean = false\n\n  $root: HTMLElement\n  $controlBar: HTMLElement\n\n  string: UiString\n\n  // 控制器按钮\n  private btnPlay: IconButton\n  private btnFullScreen: IconButton\n  // picture-in-picture button\n  private btnPIP: IconButton\n  private btnShowDanmaku: IconButton\n  private $gradientBG: HTMLElement\n  private extraButtons: Element[] = []\n  private $loading: HTMLElement\n\n  volume: VolumeLayer\n  progressBar: ProgressBar\n  danmakuStyleLayer: DanmakuStyleLayer\n  danmakuForm: DanmakuForm\n\n  // 右边按钮区别\n  private $controllerButtonsRightLayout: Element\n\n  private hideTimeout = -1\n\n  constructor (player: Player) {\n    this.player = player\n    this.$root = player.$root.querySelector('.interactive-layer') as HTMLElement\n    this.$controlBar = player.$root.querySelector(\n      '.interactive-layer .controller-bottom-bar') as HTMLElement\n    this.$controlBar.addEventListener('mouseenter', () => {\n      this.isMouseInUI = true\n    })\n    this.$controlBar.addEventListener('mouseleave', () => {\n      this.isMouseInUI = false\n    })\n    this.$gradientBG = player.$root.querySelector('.bg-gradient') as HTMLElement\n\n    this.string = player.options.ui\n    this.volume = new VolumeLayer(this)\n    this.qualitySelector = new QualitySelector(this)\n    this.progressBar = new ProgressBar(this)\n    this.danmakuStyleLayer = new DanmakuStyleLayer(this)\n    this.danmakuForm = new DanmakuForm(this)\n\n    this.$loading = this.$root.querySelector('.float.loading') as HTMLElement\n\n    this.$controllerButtonsRightLayout = this.$controlBar.querySelector(\n      '.buttons .right') as Element\n\n    this.btnFullScreen = new IconButton(\n      this.$controlBar.querySelector('.button.full-screen') as HTMLElement)\n\n    this.btnPIP = new IconButton(\n      this.$controlBar.querySelector('.button.picture-in-picture') as HTMLElement)\n    this.btnPIP.$root.addEventListener('click', () => {\n      this.player.togglePictureInPicture().then(() => {\n        this.updatePIPButton()\n      })\n    })\n\n    this.btnFullScreen.$root.addEventListener('click', async () => {\n      await this.player.toggleFullScreen()\n      this.updateFullScreenButton()\n    })\n\n    this.btnPlay = new IconButton(\n      this.$controlBar.querySelector('.button.play') as HTMLElement)\n\n    this.btnPlay.$root.addEventListener('click', () => {\n      this.player.toggle()\n      this.updatePlayButton()\n    })\n\n    this.btnShowDanmaku = new IconButton(\n      this.$controlBar.querySelector('.button.toggle-danamaku') as HTMLElement)\n    this.btnShowDanmaku.$root.addEventListener('click', () => {\n      this.danmakuLayer.toggle()\n      this.updateDanmakuButton()\n    })\n\n    this.player.$video.addEventListener('waiting', () => {\n      console.log('视频缓存中')\n      this.$loading.classList.add('show')\n    })\n    this.player.$video.addEventListener('canplay', () => {\n      console.log('视频缓存结束')\n      // eslint-disable-next-line no-unused-expressions\n      this.$loading.classList.remove('show')\n    })\n    this.$loading.innerText = this.string.loading\n    this.$loading.classList.add('show')\n\n    this.danmakuLayer = new DanmakuLayer(player)\n\n    this.insertExtraButtons()\n  }\n\n  set isMouseInUI (val: boolean) {\n    this._isMouseInUI = val\n    this.cancelHideUIDelay()\n  }\n\n  get isMouseInUI () {\n    return this._isMouseInUI\n  }\n\n  show () {\n    this.isShow = true\n    this.$controlBar.classList.add('show')\n    this.$gradientBG.classList.add('show')\n    this.progressBar.resize()\n  }\n\n  hide () {\n    this.isShow = false\n    this.$controlBar.classList.remove('show')\n    this.$gradientBG.classList.remove('show')\n    this.qualitySelector.hideLayer()\n    this.volume.hideLayer()\n    this.danmakuForm.styleLayer.hideLayer()\n    this.player.$root.focus()\n    this.progressBar.update()\n  }\n\n  hideUIDelay () {\n    this.cancelHideUIDelay()\n    return new Promise(resolve => {\n      this.hideTimeout = window.setTimeout(() => {\n        this.hide()\n        resolve()\n      }, this.player.options.uiFadeOutDelay)\n    })\n  }\n\n  cancelHideUIDelay () {\n    clearTimeout(this.hideTimeout)\n  }\n\n  clearExtraButtons () {\n    this.extraButtons.forEach($btn => $btn.remove())\n    this.extraButtons.length = 0\n  }\n\n  insertExtraButtons () {\n    this.clearExtraButtons()\n    if (this.player.options.extraButtons instanceof Array) {\n      this.player.options.extraButtons.forEach(($e) => {\n        this.$controllerButtonsRightLayout.prepend($e)\n        this.extraButtons.push($e)\n      })\n    } else {\n      for (const name in this.player.options.extraButtons) {\n        const $btn = document.createElement('div') as HTMLElement\n        $btn.innerText = name\n        $btn.addEventListener('click', this.player.options.extraButtons[name])\n        $btn.classList.add('button')\n        this.$controllerButtonsRightLayout.prepend($btn)\n        this.extraButtons.push($btn)\n      }\n    }\n  }\n\n  update () {\n    this.updateDanmakuButton()\n    this.updateFullScreenButton()\n    this.updatePlayButton()\n    this.updatePIPButton()\n    this.danmakuForm.update()\n    this.progressBar.update()\n    this.volume.update()\n    this.danmakuLayer.update()\n    this.danmakuStyleLayer.update()\n    this.qualitySelector.update()\n    this.$loading.innerText = this.string.loading\n  }\n\n  updatePlayButton () {\n    this.btnPlay.$root.setAttribute('data-on-title', this.string.play)\n    this.btnPlay.$root.setAttribute('data-off-title', this.string.pause)\n    if (this.player.paused) {\n      this.btnPlay.switch('data-on', 'data-on-title')\n    } else {\n      this.btnPlay.switch('data-off', 'data-off-title')\n    }\n  }\n\n  updateFullScreenButton () {\n    this.btnFullScreen.$root.setAttribute('data-on-title', this.string.fullscreen)\n    this.btnFullScreen.$root.setAttribute('data-off-title', this.string.cancelFullscreen)\n    this.btnFullScreen.$root.style.display = this.player.options.fullScreen\n      ? ''\n      : 'none'\n    if (this.player.isFullScreen) {\n      this.btnFullScreen.switch('data-off', 'data-off-title')\n    } else {\n      this.btnFullScreen.switch('data-on', 'data-on-title')\n    }\n  }\n\n  updatePIPButton () {\n    this.btnPIP.$root.style.display = this.player.isSupportPictureInPicture && this.player.options.pictureInPicture\n      ? ''\n      : 'none'\n    this.btnPIP.$root.setAttribute('title', this.player.isInPictureInPicture ? this.string.pictureInPictureOff : this.string.pictureInPictureOn)\n  }\n\n  updateDanmakuButton () {\n    this.btnShowDanmaku.$root.setAttribute('data-on-title', this.string.showDanmaku)\n    this.btnShowDanmaku.$root.setAttribute('data-off-title', this.string.hideDanmaku)\n    if (this.player.options.danmaku.enable) {\n      let attr: string\n      let title: string\n      if (this.danmakuLayer.isShow) {\n        attr = 'data-on'\n        title = 'data-on-title'\n      } else {\n        attr = 'data-off'\n        title = 'data-off-title'\n      }\n      this.btnShowDanmaku.switch(attr, title)\n      this.btnShowDanmaku.show()\n    } else {\n      this.btnShowDanmaku.hide()\n    }\n  }\n\n  resize () {\n    if (this.qualitySelector.isShow) this.qualitySelector.updateLayerPosition()\n    this.volume.update()\n    this.progressBar.resize()\n    this.danmakuLayer.resize()\n  }\n\n  destroy () {\n    clearTimeout(this.hideTimeout)\n    this.danmakuLayer.destroy()\n    this.qualitySelector.destroy()\n    this.volume.destroy()\n  }\n\n  get debug (): Object {\n    return {\n      isShow: this.isShow,\n      isMouseInUI: this._isMouseInUI,\n      danmakuLayer: this.danmakuLayer.debug,\n    }\n  }\n}\n","import { EventEmitter } from 'eventemitter3'\n\nconst AdapterEvents = {\n  OnLoad: 'OnLoaded',\n  OnChanged: 'OnChanged',\n}\n\nexport interface QualityLevel {\n  selected: boolean,\n  index: number,\n  name: string,\n  bitrate: number\n}\n\nfunction createLevelsFromHls (hls: Hls): QualityLevel[] {\n  const levels: { [key: string]: QualityLevel } = {}\n  hls.levels.forEach((item: Hls.Level, index) => {\n    let name\n    if (item.name) {\n      name = item.name\n    } else if (item.width && item.height) {\n      name = Math.min(item.width, item.height) + 'P'\n      // @ts-ignore\n    } else if (item.attrs['RESOLUTION']) {// eslint-disable-line\n      console.log('name', index, item.attrs)\n      // @ts-ignore\n      name = item.attrs['RESOLUTION']// eslint-disable-line\n    } else {\n      name = 'Lv ' + index\n    }\n    if (levels[name] && levels[name].bitrate > item.bitrate) return\n    levels[name] = {\n      selected: false,\n      name,\n      index,\n      bitrate: item.bitrate,\n    }\n  })\n  return Object.values(levels)\n}\n\nfunction createLevelsFromDash (dash: dashjs.MediaPlayerClass): QualityLevel[] {\n  const levels: { [key: string]: QualityLevel } = {}\n  const list = dash.getBitrateInfoListFor('video')\n  list.forEach((item: dashjs.BitrateInfo, index) => {\n    if (!('height' in item)) return\n    const name = Math.min(item.width, item.height) + 'P'\n    if (levels[name] && levels[name].bitrate > item.bitrate) return\n    levels[name] = {\n      selected: false,\n      name,\n      index: item.qualityIndex,\n      bitrate: item.bitrate,\n    }\n  })\n  return Object.values(levels)\n}\n\nexport class QualityLevelAdapter extends EventEmitter {\n  static Events = AdapterEvents\n  private hls?: Hls\n  private dash?: dashjs.MediaPlayerClass\n  private _level!: QualityLevel\n\n  get currentLevel () {\n    return this._level\n  }\n\n  constructor () {\n    super()\n    console.log('event', QualityLevelAdapter.Events)\n  }\n\n  useHls (hls: Hls) {\n    this.hls = hls\n    this.dash = undefined\n\n    hls.on(Hls.Events.LEVEL_LOADED, () => {\n      console.log('Hls.Events.LEVEL_LOADED')\n      this.emit(QualityLevelAdapter.Events.OnLoad, createLevelsFromHls(hls))\n    })\n  }\n\n  useDash (dash: dashjs.MediaPlayerClass) {\n    this.dash = dash\n    this.hls = undefined\n    dash.on('streamInitialized', () => {\n      this.emit(QualityLevelAdapter.Events.OnLoad, createLevelsFromDash(dash))\n    })\n  }\n\n  changeLevelTo (level: QualityLevel) {\n    this._level = level\n    if (this.hls) {\n      this.hls.currentLevel = level.index\n    } else if (this.dash) {\n      console.log('dash 改变 level', level)\n      const setting = this.dash.getSettings()\n      if (setting.streaming && setting.streaming.abr) {\n        const isAuto = level.index === -1\n        if (!isAuto) {\n          this.dash.setQualityFor('video', level.index)\n        }\n        if (setting.streaming.abr.autoSwitchBitrate) setting.streaming.abr.autoSwitchBitrate.video = isAuto\n        setting.streaming.abr.limitBitrateByPortal = isAuto\n      }\n      this.dash.updateSettings(setting)\n    }\n  }\n}\n","import './style.scss'\nimport { EventEmitter } from 'eventemitter3'\nimport { Danmaku } from '@/player/danmaku/danmaku'\nimport { Ui, UiString } from '@/player/ui'\nimport { DanmakuLayerOptions, MakeDanmakuLayerOptions, } from '@/player/danmaku/danmakuLayer'\nimport { QualityLevel, QualityLevelAdapter } from '@/player/qualityLevelAdapter'\nimport { Hash, RandomID } from '@/player/utils'\n\nconst DanPlayerVersion = '0.0.37'\n\nconst icon = '//at.alicdn.com/t/font_1373341_eeojr5zqmon.js'\n\nconst defaultColor = '#00a1d6'\n\nexport enum ForceUse {\n  Hls = 1,\n  Dash\n}\n\ninterface PlayerOptions {\n  live: boolean\n\n  volume: number\n\n  autoplay: boolean\n\n  uiFadeOutDelay: number\n\n  width: number | string\n  height: number | string\n\n  src: string\n\n  iconSrc: string\n\n  forward: number\n  backward: number\n\n  extraButtons: HTMLElement[] | { [name: string]: () => void }\n\n  danmaku: DanmakuLayerOptions\n\n  fullScreen: boolean\n\n  danmakuForm: boolean\n\n  unique: boolean\n\n  color: string\n\n  beforeSendDanmaku?: (danmaku: Danmaku) => Promise<boolean>\n\n  forceUse?: ForceUse\n\n  ui: UiString\n\n  preload: 'auto' | 'metadata' | 'none'\n\n  timeFormat?: string\n\n  pictureInPicture: boolean\n}\n\nexport interface PlayerPublicOptions {\n\n  // 是否启用直播模式，没有进度条，没有播放时间\n  live: boolean\n\n  // 音量，0~1，默认为0.7\n  volume: number\n\n  // 自动播放，根据浏览器的差异不一定有效\n  autoplay: boolean\n\n  // ui 的隐藏时间，毫秒\n  uiFadeOutDelay: number\n\n  // 视频寸尺\n  width: number | string\n  height: number | string\n\n  // 视频来源，也可以在<video src=\"\"></video>的src设置\n  src: string\n\n  iconSrc: string\n\n  // 前进的秒数，毫秒\n  forward: number\n  // 倒退的秒数，毫秒\n  backward: number\n\n  // 扩展按钮\n  // extraButtons: { [name: string | HTMLElement]: () => void }\n\n  extraButtons: HTMLElement[]\n\n  // 弹幕层的配置 DanmakuLayerOptions\n  danmaku: Partial<DanmakuLayerOptions>\n\n  // 是否需要全屏\n  fullScreen: boolean\n\n  // 是否显示播放器底部中间的弹幕输入框\n  danmakuForm: boolean\n\n  // 唯一播放的播放器\n  unique: boolean\n\n  // 播放器的亮色，包括：进度条、进度滑块、音量滑块、音量条\n  color: string\n\n  // 发送弹幕前的事件\n  beforeSendDanmaku?: (danmaku: Danmaku) => Promise<boolean>\n\n  // 强制启用hls.js或者dash.js\n  // 多数用于移动平台，因为Android webview支持hls，导致不会使用hls.js\n  // 丢失了hls.js提供的画质选项\n  forceUse?: ForceUse\n\n  // ui 界面 多语言支持\n  ui?: UiString\n\n  preload?: 'auto' | 'metadata' | 'none'\n\n  timeFormat?: string\n\n  pictureInPicture?: boolean\n}\n\nexport enum VideoType {\n  Normal = 'native',\n  Hls = 'hls.js',\n  Dash = 'dash.js',\n}\n\nfunction MakeDefaultOptions ({\n  autoplay = false,\n  color = defaultColor,\n  live = false,\n  volume = 0.7,\n  width = 600,\n  height = 350,\n  uiFadeOutDelay = 3000,\n  extraButtons = [],\n  src = '',\n  iconSrc = icon,\n  danmakuForm = true,\n  fullScreen = true,\n  beforeSendDanmaku = undefined,\n  danmaku = {},\n  forward = 5,\n  backward = 5,\n  unique = false,\n  forceUse = undefined,\n  ui = undefined,\n  preload = 'none',\n  timeFormat,\n  pictureInPicture = true,\n}: Partial<PlayerPublicOptions>): PlayerOptions {\n  if (volume < 0 || volume > 1) {\n    volume = 0.7\n  }\n  const _ui = Object.assign(new UiString(), ui || {})\n  return {\n    autoplay,\n    color,\n    live,\n    height,\n    danmaku: MakeDanmakuLayerOptions(danmaku),\n    danmakuForm,\n    fullScreen,\n    src,\n    iconSrc,\n    forward,\n    backward,\n    uiFadeOutDelay,\n    extraButtons,\n    unique,\n    volume,\n    beforeSendDanmaku,\n    width,\n    forceUse,\n    ui: _ui,\n    preload,\n    timeFormat,\n    pictureInPicture,\n  }\n}\n\nconst template = `{video-layer}\n<div class=\"interactive-layer\">\n  <canvas class=\"danmaku-layer\"></canvas>\n\n  <div class=\"bg-gradient show\"></div>\n\n\n  <div class=\"float danmaku-style-layer\"></div>\n\n  <div class=\"float volume-bar\">\n    <div class=\"volume-num-label\"></div>\n    <div class=\"volume-column-bar\">\n      <div class=\"bar-ui bar-full\"></div>\n      <div class=\"bar-ui bar-current\"></div>\n      <div class=\"bar-controller\"></div>\n    </div>\n  </div>\n\n  <div class=\"float quality-menu\"></div>\n  \n  <div class=\"float loading show\"></div>\n\n  <div class=\"controller-bottom-bar\">\n    <div class=\"progress-bar live-hide\">\n      <div class=\"bar-full\"></div>\n      <div class=\"bar-buffer\"></div>\n      <div class=\"bar-current\"></div>\n      <div class=\"bar-controller\"></div>\n    </div>\n\n    <div class=\"buttons\">\n      <div class=\"left\">\n        <div class=\"button intern-button play\" data-on=\"danplayer-bofang\" data-off=\"danplayer-zanting\"\n          data-on-title=\"{play}\" data-off-title=\"{pause}\">\n          <svg class=\"icon\" aria-hidden=\"true\"><use xlink:href=\"#danplayer-bofang\"></use></svg>\n        </div>\n        <div class=\"time\"></div>\n      </div>\n\n      <div class=\"middle danmaku-form\">\n        <div class=\"button intern-button danmaku-style\">\n          <svg class=\"icon\"><use xlink:href=\"#danplayer-style\"></use></svg>\n        </div>\n        <input placeholder=\"{danmakuInputHint}\" tabindex=\"1\">\n        <div class=\"send\">{danmakuSend}</div>\n      </div>\n      <div class=\"right\">\n\n        <div class=\"button intern-button volume\" data-on=\"danplayer-yinliang\" data-off=\"danplayer-jingyin\" title=\"{volume}\">\n          <svg class=\"icon\"><use xlink:href=\"#danplayer-yinliang\"></use></svg>\n        </div>\n\n        <div class=\"button intern-button toggle-danamaku\" title=\"隐藏弹幕\"\n          data-on=\"danplayer-danmuguan\" data-off=\"danplayer-danmukai\"\n          data-on-title=\"{showDanmaku}\" data-off-title=\"{hideDanmaku}\">\n          <svg class=\"icon\"><use xlink:href=\"#danplayer-danmukai\"></use></svg>\n        </div>\n\n        <div class=\"button quality\" title=\"{switchQuality}\"></div>\n\n        <div class=\"button intern-button picture-in-picture\">\n          <svg class=\"icon\"><use xlink:href=\"#danplayer-pip\"></use></svg>\n        </div>\n        \n        <div class=\"button intern-button full-screen\" data-on=\"danplayer-quanping\" data-off=\"danplayer-zuixiaohua\"\n        data-on-title=\"{fullscreen}\" data-off-title=\"{cancelFullscreen}\">\n          <svg class=\"icon\"><use xlink:href=\"#danplayer-quanping\"></use></svg>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>`\n\nexport class Player extends EventEmitter {\n  private static instances: Player[] = []\n  $root: HTMLElement\n  $video: HTMLVideoElement\n  type = VideoType.Normal\n  // @ts-ignore\n  public isSupportPictureInPicture: boolean = !!document.pictureInPictureEnabled\n\n  public get isInPictureInPicture () {\n    // @ts-ignore\n    return this.$video === document.pictureInPictureElement\n  }\n\n  private readonly id: string\n  private hls?: Hls\n  private dash?: dashjs.MediaPlayerClass\n\n  public ui: Ui\n\n  clickEvent: 'touchstart' | 'click' = ('ontouchstart' in document.documentElement ? 'touchstart' : 'click')\n\n  private adapter: QualityLevelAdapter\n\n  private $style!: HTMLStyleElement\n\n  // 尺寸\n  private _width: string = ''\n  private _height: string = ''\n\n  get width () {\n    return this.$root.clientWidth\n  }\n\n  get height () {\n    return this.$root.clientHeight\n  }\n\n  get isFullScreen () {\n    return this._isFullScreen\n  }\n\n  private _duration: number = 0\n  private _loading = true\n  private _paused = true\n  private _isFullScreen: boolean = false\n\n  get loading () {\n    return this._loading\n  }\n\n  public options: PlayerOptions\n\n  constructor ($e: HTMLElement, options?: Partial<PlayerPublicOptions>) {\n    super()\n\n    console.info(`DanPlayer v$0.0.37`)\n    options = options || {}\n    this.options = MakeDefaultOptions(options)\n\n    const hash = Hash(icon)\n    if (!document.querySelector('script#danplayer-icon' + hash)) {\n      const $icon = document.createElement('script')\n      $icon.src = icon\n      $icon.id = 'danplayer-icon'\n      document.body.append($icon)\n    }\n    Player.instances.push(this)\n    const parent = $e.parentElement as Element\n    this.$root = document.createElement('div')\n    this.id = RandomID()\n    this.$root.setAttribute('data-style', this.id)\n    this.$root.setAttribute('tabIndex', '0')\n    this.$root.classList.add('danplayer')\n    parent.insertBefore(this.$root, $e)\n\n    let videoLayer\n    if ($e.tagName.toLowerCase() === 'video') {\n      $e.classList.add('video-layer')\n      $e.removeAttribute('id')\n      videoLayer = $e.outerHTML\n      if (options && !('src' in options)) {\n        options.src = $e.getAttribute('src') as string\n      }\n    } else {\n      videoLayer = '<video class=\"video-layer\"></video>'\n    }\n    this.$root.innerHTML = template.replace('{video-layer}', videoLayer)\n      .replace('{volume}', this.options.ui.volume)\n      .replace('{showDanmaku}', this.options.ui.showDanmaku)\n      .replace('{hideDanmaku}', this.options.ui.hideDanmaku)\n      .replace('{play}', this.options.ui.play)\n      .replace('{pause}', this.options.ui.pause)\n      .replace('{danmakuInputHint}', this.options.ui.danmakuInputHint)\n      .replace('{danmakuSend}', this.options.ui.danmakuSend)\n      .replace('{fullscreen}', this.options.ui.fullscreen)\n      .replace('{cancelFullscreen}', this.options.ui.cancelFullscreen)\n      .replace('{switchQuality}', this.options.ui.switchQuality)\n    $e.remove()\n\n    this.$root.addEventListener('contextmenu', (e: MouseEvent) => {\n      e.stopPropagation()\n      e.preventDefault()\n    })\n\n    this.$root.addEventListener('keypress', (e: KeyboardEvent) => {\n      console.log('keypress', e.key)\n      if (e.key === 'Enter') {\n        this.ui.show()\n        this.ui.danmakuForm.focus()\n      } else if (e.key === ' ') {\n        this.toggle()\n        e.stopPropagation()\n        e.preventDefault()\n      }\n    })\n    this.$root.addEventListener('keydown', (e: KeyboardEvent) => {\n      console.warn('keydown 1', e.key)\n      const stop = e.key.startsWith('Arrow')\n      if (!this.options.live) {\n        if (e.key === 'ArrowLeft') {\n          this.$video.currentTime -= this.options.backward\n        } else if (e.key === 'ArrowRight') {\n          this.$video.currentTime += this.options.forward\n        }\n      }\n      if (e.key === 'ArrowUp') {\n        this.ui.volume.up()\n      } else if (e.key === 'ArrowDown') {\n        this.ui.volume.down()\n      }\n      // console.warn('keydown 2', stop)\n      if (stop) {\n        e.stopPropagation()\n        e.preventDefault()\n      }\n    })\n\n    document.addEventListener('fullscreenchange', () => {\n      this._isFullScreen = document.fullscreenElement === this.$root\n      this.ui.updateFullScreenButton()\n    })\n\n    this.$root.addEventListener('mousemove', () => {\n      this.$root.classList.remove('mouse-idle')\n      if (!this.ui.isShow) {\n        this.ui.show()\n        this.ui.cancelHideUIDelay()\n      }\n      if (!this.paused && !this.ui.isMouseInUI) {\n        this.ui.hideUIDelay().then(() => {\n          this.$root.classList.add('mouse-idle')\n        })\n      }\n    })\n\n    this.$root.addEventListener('touchstart', () => {\n      this.ui.show()\n      this.ui.cancelHideUIDelay()\n    })\n    this.$root.addEventListener('touchend', () => {\n      this.ui.hideUIDelay()\n    })\n\n    this.$root.addEventListener('mouseover', () => {\n      if (this.ui.isShow) return\n      this.$root.classList.remove('mouse-idle')\n      this.ui.show()\n      this.ui.cancelHideUIDelay()\n    })\n    this.$root.addEventListener('mouseleave', () => {\n      if (!this.ui.isShow) return\n      this.ui.hide()\n      this.ui.cancelHideUIDelay()\n    })\n\n    this.$video = this.$root.querySelector('.video-layer') as HTMLVideoElement\n    this.$video.removeAttribute('controls')\n    this.$video.addEventListener('durationchange', () => {\n      // console.log('视频长度', this.$video.duration)\n      this._duration = this.$video.duration\n    })\n    this.$video.setAttribute('preload', this.options.preload)\n\n    this.$video.addEventListener('playing', () => this.ui.hideUIDelay())\n\n    this.$video.addEventListener('play', () => this.ui.updatePlayButton())\n    this.$video.addEventListener('pause', () => this.ui.updatePlayButton())\n\n    this.$video.addEventListener('error', () => this.errorHandler())\n\n    this.$video.addEventListener('loadedmetadata', () => {\n      console.log('loadedmetadata')\n      if (this.type === VideoType.Normal) {\n        this.ui.qualitySelector.hideButton()\n      } else {\n        this.ui.qualitySelector.showButton()\n      }\n    })\n\n    if (!('width' in options)) {\n      options.width = this.$video.clientWidth as number\n    }\n    if (!('height' in options)) {\n      options.width = this.$video.clientHeight as number\n    }\n    if (!('autoplay' in options)) {\n      options.autoplay = this.$video.hasAttribute('autoplay')\n    }\n\n    window.addEventListener('resize', () => this.resizeEvt(1000))\n\n    this.adapter = new QualityLevelAdapter()\n    this.ui = new Ui(this)\n    this.ui.show()\n    this.ui.progressBar.init()\n    this.ui.hideUIDelay()\n\n    this.adapter.on(QualityLevelAdapter.Events.OnLoad,\n      (levels: QualityLevel[]) => {\n        this.ui.qualitySelector.updateLevel(levels)\n      })\n    this.ui.qualitySelector.on('selectLevel', (level: QualityLevel) => {\n      console.log('选择画质级别', level)\n      this.ui.progressBar.resetProgressBar()\n      this.adapter.changeLevelTo(level)\n    })\n\n    this.updateUI()\n    this.updateSrc().then()\n\n    if (options?.forceUse) {\n      this.errorHandler()\n    }\n  }\n\n  private async updateSrc () {\n    this.type = VideoType.Normal\n\n    this.$video.src = this.options.src\n\n    console.log('_set',\n      {\n        autoplay: this.options.autoplay,\n        paused: this._paused,\n      })\n    if (this.options.autoplay || !this.paused) {\n      console.log('_set 播放')\n      this.play()\n    }\n  }\n\n  private updateUI () {\n    this.ui.string = this.options.ui\n\n    this.ui.insertExtraButtons()\n\n    this.ui.update()\n\n    this.ui.progressBar.resize()\n\n    this.resize()\n\n    if (this.$style) {\n      this.$style.remove()\n    }\n    if (this.options.color !== defaultColor) {\n      this.$style = document.createElement('style') as HTMLStyleElement\n      this.$style.innerHTML = `\n.danplayer[data-style=\"${this.id}\"] .colors .selected{border-color:${this.options.color} !important}\n.danplayer[data-style=\"${this.id}\"] .types .selected{color:${this.options.color} !important}\n.danplayer[data-style=\"${this.id}\"] .quality-menu .current{color:${this.options.color} !important}\n\n.danplayer[data-style=\"${this.id}\"] .volume-bar .bar-controller{background:${this.options.color} !important}\n.danplayer[data-style=\"${this.id}\"] .volume-bar .bar-current{background:${this.options.color} !important}\n\n.danplayer[data-style=\"${this.id}\"] .progress-bar .bar-controller{background:${this.options.color} !important}\n.danplayer[data-style=\"${this.id}\"] .progress-bar .bar-current{background:${this.options.color} !important}\n`\n      this.$root.append(this.$style)\n    }\n    this.ui.qualitySelector.update()\n\n    if (this.options.live) {\n      this.$root.classList.add('live')\n    } else {\n      this.$root.classList.remove('live')\n    }\n    this.$video.volume = this.options.volume\n  }\n\n  set (options: Partial<PlayerPublicOptions>) {\n    const srcHasChanged = options.src !== this.options.src\n    options.ui = Object.assign({}, new UiString(), options.ui)\n    options.danmaku = Object.assign({}, this.options.danmaku, options.danmaku)\n    const newOptions = Object.assign({}, this.options, options)\n    console.log('set', newOptions)\n    const optionsHasChanged = JSON.stringify(newOptions) ===\n      JSON.stringify(this.options)\n    if (srcHasChanged) {\n      if (!options.forceUse) newOptions.forceUse = undefined\n    }\n    this.options = newOptions\n    this.$video.setAttribute('preload', this.options.preload)\n    if (srcHasChanged) {\n      if (this.hls) {\n        this.hls.detachMedia()\n        this.hls = undefined\n      }\n      if (this.dash) {\n        this.dash.reset()\n        this.dash = undefined\n      }\n      this.ui.progressBar.reset()\n      this.ui.qualitySelector.reset()\n      this.updateSrc().then()\n    }\n    this.updateUI()\n\n    if (optionsHasChanged) {\n      this.emit('optionChanged', this)\n    }\n\n    console.log('set', options)\n    if (options?.forceUse) {\n      this.errorHandler()\n    }\n  }\n\n  resize () {\n    if (this.options.width) {\n      if (typeof this.options.width === 'number' ||\n        parseInt(this.options.width).toString() === this.options.width) {\n        this._width = this.options.width + 'px'\n      } else {\n        this._width = this.options.width\n      }\n    }\n    if (this.options.height) {\n      if (typeof this.options.height === 'number' ||\n        parseInt(this.options.height).toString() === this.options.height) {\n        this._height = this.options.height + 'px'\n      } else {\n        this._height = this.options.height\n      }\n    }\n    // console.log('resize options', this.options, { width: this._width, height: this._height })\n    if (!this._isFullScreen) {\n      this.$root.style.width = this._width\n      this.$root.style.height = this._height\n    }\n    this.ui.resize()\n  }\n\n  private delayResize: number = -1\n\n  private resizeEvt (ms: number) {\n    window.clearTimeout(this.delayResize)\n    this.delayResize = window.setTimeout(() => {\n      this.resize()\n    }, ms)\n  }\n\n  /**\n   * 批量填充弹幕\n   */\n  fillDanmakus (array: Danmaku[]) {\n    this.ui.danmakuLayer.danmakus.push(...array)\n  }\n\n  get currentTime () {\n    return this.$video.currentTime\n  }\n\n  sendDanmaku (danmaku: Danmaku) {\n    this.ui.danmakuLayer.send(danmaku)\n  }\n\n  clearDanmaku () {\n    this.ui.danmakuLayer.clear()\n  }\n\n  get paused () {\n    return this._paused\n  }\n\n  toggle () {\n    if (this.paused) {\n      this.play()\n    } else {\n      this.pause()\n    }\n  }\n\n  play () {\n    this._paused = false\n    this.$video.play().then()\n    if (this.options.unique) {\n      Player.instances.forEach(player => {\n        if (player !== this) {\n          player.pause()\n        }\n      })\n    }\n  }\n\n  pause () {\n    this._paused = true\n    this.$video.pause()\n  }\n\n  /**\n   * 当播放视频错误时\n   */\n  private async errorHandler () {\n    console.error('video 视频资源 错误', this.$video.error)\n    // if (!this.$video.error || this.$video.error.code !== 4) return\n    console.log('errorHandler')\n    if (this.options.forceUse === ForceUse.Hls ||\n      this.options.src.match(/\\.m3u[8]/)) {\n      console.log('errorHandler', 'hls.js')\n      this.type = VideoType.Hls\n      if (this.hls) this.hls.destroy()\n      this.hls = new Hls()\n      this.hls.attachMedia(this.$video)\n      this.hls.loadSource(this.options.src)\n      this.hls.config.capLevelToPlayerSize = true\n      this.adapter.useHls(this.hls)\n    } else if (this.options.forceUse === ForceUse.Dash ||\n      this.options.src.match(/\\.mpd/)) {\n      this.type = VideoType.Dash\n      if (this.dash) this.dash.reset()\n      this.dash = dashjs.MediaPlayer().create()\n      this.dash.initialize(this.$video, this.options.src, !this.$video.paused)\n      const setting = this.dash.getSettings()\n      if (setting.streaming?.abr) setting.streaming.abr.limitBitrateByPortal = true\n      this.dash.updateSettings(setting)\n      this.adapter.useDash(this.dash)\n    }\n\n    if (!this.$video.paused) {\n      this.$video.setAttribute('autoplay', '')\n      this.$video.play()\n    }\n  }\n\n  /**\n   * 切换全屏模式\n   */\n  async toggleFullScreen () {\n    if (!this.options.fullScreen) return\n    this._isFullScreen = !this._isFullScreen\n    if (this._isFullScreen) {\n      this.$root.classList.add('full-screen')\n\n      if (this.$root.requestFullscreen) {\n        await this.$root.requestFullscreen()\n      } else {\n        // @ts-ignore\n        if (this.$root.webkitRequestFullscreen) {\n          // @ts-ignore\n          await this.$root.webkitRequestFullscreen()\n        }\n        // @ts-ignore\n        if (this.$root.mozRequestFullScreen) {\n          // @ts-ignore\n          await this.$root.mozRequestFullScreen()\n        }\n        // @ts-ignore\n        if (this.$root.mozRequestFullScreen) {\n          // @ts-ignore\n          await this.$root.mozRequestFullScreen()\n        }\n        // @ts-ignore\n        if (this.$root.msRequestFullscreen) {\n          // @ts-ignore\n          await this.$root.msRequestFullscreen()\n        }\n      }\n    } else {\n      if (document.exitFullscreen) {\n        await document.exitFullscreen()\n      } else {\n        // @ts-ignore\n        if (document.mozCancelFullScreen) {\n          // @ts-ignore\n          await document.mozCancelFullScreen()\n        }\n        // @ts-ignore\n        if (document.webkitCancelFullScreen) {\n          // @ts-ignore\n          await document.webkitCancelFullScreen()\n        }\n        // @ts-ignore\n        if (document.msExitFullscreen) {\n          // @ts-ignore\n          await document.msExitFullscreen()\n        }\n      }\n\n      this.$root.classList.remove('full-screen')\n    }\n    this.resize()\n    this.emit('toggleFullscreen')\n  }\n\n  /**\n   * 切换 画中画\n   */\n  async togglePictureInPicture () {\n    // @ts-ignore\n    if (!this.isSupportPictureInPicture) return\n    try {\n      // @ts-ignore\n      if (this.$video !== document.pictureInPictureElement) {\n        // @ts-ignore\n        await this.$video.requestPictureInPicture()\n      } else {\n        // @ts-ignore\n        await document.exitPictureInPicture()\n      }\n    } catch (error) {\n    } finally {\n    }\n  }\n\n  /**\n   * 销毁\n   */\n  destroy () {\n    Player.instances.splice(Player.instances.indexOf(this), 1)\n    this.ui.destroy()\n    if (this.hls) {\n      this.hls.detachMedia()\n    }\n    if (this.dash) {\n      this.dash.reset()\n    }\n    if (this.$style) {\n      this.$style.remove()\n    }\n    this.$root.remove()\n  }\n\n  get debug (): Object {\n    let quality = '默认'\n    const src = this.options.src\n    if (this.type !== VideoType.Normal) {\n      if (this.adapter.currentLevel) {\n        quality = this.adapter.currentLevel.name\n      } else {\n        quality = '自动'\n      }\n    }\n    return {\n      id: this.id,\n      width: this.width,\n      height: this.height,\n      type: this.type,\n      src,\n      quality,\n      ui: this.ui.debug,\n    }\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Watch } from 'vue-property-decorator'\nimport { ForceUse, Player } from '@/player/player'\nimport { Danmaku } from '@/player/danmaku/danmaku'\nimport { LimitType } from './player/danmaku/danmakuLayer'\nimport { UiString } from './player'\n\nlet player: Player\nlet updateInterval\n\n@Component\nexport default class App extends Vue {\n  private settings = {\n    danmaku: true,\n    danmakuForm: !('ontouchstart' in document.documentElement),\n    flowDuration: 1,\n    fadeoutDuration: 1,\n    volume: 0.7,\n    alpha: 1,\n    live: false,\n    color: '',\n    fullscreen: true,\n    danmakuLimit: Object.keys(LimitType)[0],\n    isChinese: true,\n  }\n\n  private random = { count: 100, timeRange: 10 }\n  private form = { type: 1, danmaku: '', videoSrc: '' }\n  private debug = false\n\n  sendDanmaku () {\n    if (this.form.danmaku) {\n      player.sendDanmaku(new Danmaku(this.form.danmaku, {\n        type: Number(this.form.type),\n        borderColor: 'red',\n        currentTime: player.currentTime,\n        id: 'myself',\n      }))\n    }\n  }\n\n  @Watch('settings', { deep: true })\n  formChanged () {\n    const ui = this.settings.isChinese ? new UiString() : {\n      volume: 'Volume',\n      live: 'Live',\n      play: 'Play',\n      pause: 'Pause',\n      copy: 'Copy',\n      danmakuSend: 'Send',\n      danmakuInputHint: 'Input Danmaku Content',\n      autoQualitySelect: 'Auto',\n      danmakuType: 'Type',\n      danmakuColor: 'Color',\n      danmakuTypeFlow: 'Flow',\n      danmakuTypeTopFixed: 'Top',\n      danmakuTypeBottomFixed: 'Bottom',\n      fullscreen: 'Fullscreen',\n      cancelFullscreen: 'Cancel Fullscreen',\n      showDanmaku: 'Show Danmaku',\n      hideDanmaku: 'Hide Danmaku',\n      loading: 'Loading',\n    }\n    player.set({\n      color: this.settings.color,\n      fullScreen: this.settings.fullscreen,\n      danmakuForm: this.settings.danmakuForm,\n      live: this.settings.live,\n      volume: this.settings.volume,\n      ui,\n      danmaku: {\n        alpha: this.settings.alpha,\n        fadeoutDuration: this.settings.fadeoutDuration,\n        flowDuration: this.settings.flowDuration,\n        enable: this.settings.danmaku,\n        limit: LimitType[this.settings.danmakuLimit],\n      },\n    })\n  }\n\n  @Watch('form.type')\n  formType () {\n    console.log(this.form)\n  }\n\n  @Watch('debug')\n  debugSwitch () {\n    const $debug = document.querySelector('.debug-info pre') as HTMLPreElement\n    if (this.debug) {\n      updateInterval = setInterval(() => {\n        $debug.innerText = JSON.stringify(player.debug, null, 2)\n      }, 100)\n    } else {\n      clearInterval(updateInterval)\n      $debug.innerText = ''\n    }\n  }\n\n  setSrc () {\n    if (this.form.videoSrc) {\n      player.set({ live: this.settings.live, src: this.form.videoSrc })\n    }\n  }\n\n  playMp4 () {\n    player.set({ src: 'https://file-examples.com/wp-content/uploads/2017/04/file_example_MP4_1280_10MG.mp4' })\n  }\n\n  playMpd () {\n    player.set({ src: 'https://dash.akamaized.net/akamai/bbb_30fps/bbb_30fps.mpd' })\n  }\n\n  playHls () {\n    player.set({ src: 'https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8', forceUse: ForceUse.Hls })\n  }\n\n  sendRandomDanmaku () {\n    const array = []\n    for (let i = 0; i < this.random.count; i++) {\n      const randomTime = Math.random() * this.random.timeRange\n      const currentTime = player.currentTime + randomTime\n      const randomType = [0, 1, 2].indexOf(Math.round(Math.random() * 3))\n      const danmaku = new Danmaku('弹幕 ' + i, { currentTime, type: randomType })\n      array.push(danmaku)\n    }\n    player.fillDanmakus(array)\n  }\n\n  mounted () {\n    const $e = document.getElementById('player') as HTMLVideoElement\n    const $myButton = document.createElement('div')\n    $myButton.innerText = '😂'\n    $myButton.onclick = () => alert('点击了扩展按钮')\n    if ($e) {\n      player = new Player($e, {\n        src: 'https://file-examples.com/wp-content/uploads/2017/04/file_example_MP4_1280_10MG.mp4',\n        color: '#ea3bf1',\n        width: '100%',\n        volume: 0.7,\n        timeFormat: 'mm😊ss',\n        danmakuForm: this.settings.danmakuForm,\n        danmaku: {\n          contextMenu: (danmaku: Danmaku) => {\n            const items: any = {}\n            if (danmaku.id === 'myself') { // 自己的弹幕\n              items['撤回'] = () => {\n                alert('弹幕内容：' + danmaku.text)\n              }\n            } else { // 别人的弹幕\n              items['举报'] = () => {\n                alert('举报内容：' + danmaku.text)\n              }\n            }\n            return items\n          },\n        },\n        async beforeSendDanmaku (danmaku) {\n          danmaku.id = 'myself'\n          return true\n        },\n        extraButtons: [$myButton]\n      })\n      this.settings.flowDuration = player.options.danmaku.flowDuration\n      this.settings.fadeoutDuration = player.options.danmaku.fadeoutDuration\n      this.settings.alpha = player.options.danmaku.alpha\n      this.settings.color = player.options.color\n      this.settings.volume = player.options.volume\n      this.settings.danmakuLimit = Object.keys(LimitType)[Object.values(LimitType).indexOf(player.options.danmaku.limit)]\n\n      // tg-ignore\n      window.player = player\n    }\n  }\n\n  beforeDestroy () {\n    console.log('beforeDestroy')\n    player.destroy()\n    clearInterval(updateInterval)\n  }\n}\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--14-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--14-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--14-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--14-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=71eb17a4&\"\nimport script from \"./App.vue?vue&type=script&lang=ts&\"\nexport * from \"./App.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\n// @ts-ignore\nimport App from './App.vue'\nimport ElementUI from 'element-ui'\nimport 'element-ui/lib/theme-chalk/index.css'\n\nVue.use(ElementUI)\n\nVue.config.productionTip = false\n\nconsole.log('my version', process.env)\n\nnew Vue({\n  render: h => h(App)\n}).$mount('#app')\n","module.exports = __webpack_public_path__ + \"img/logo.f68b23e0.png\";","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".danplayer-danmaku-context-menu{position:absolute;font-size:12px;outline:none;color:#fff;padding:0 15px;z-index:999;background:rgba(0,0,0,.8)}.danplayer-danmaku-context-menu>div{height:42px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:default}.danplayer-danmaku-context-menu>div:hover .buttons{visibility:unset}.danplayer-danmaku-context-menu>div .content{padding-right:15px;width:135px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.danplayer-danmaku-context-menu>div .buttons{visibility:hidden}.danplayer-danmaku-context-menu>div .buttons span{border-radius:5px;padding:8px 10px;cursor:pointer}.danplayer-danmaku-context-menu>div .buttons span:hover{background:hsla(0,0%,100%,.1)}.danplayer{background:#000;position:relative;overflow:hidden;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;outline:none}.danplayer .icon{width:1em;height:1em;vertical-align:-.15em;fill:currentColor;overflow:hidden}.danplayer.live .live-hide{display:none!important}.danplayer.mouse-idle,.danplayer.mouse-idle .danmaku-layer{cursor:none!important}.danplayer video.video-layer{background:#000;position:absolute;left:0;top:0;width:100%;height:100%;z-index:1}.danplayer div.interactive-layer{position:absolute;z-index:2;left:0;top:0;width:100%;height:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;text-align:center}.danplayer div.interactive-layer .toast{position:absolute;padding:6px;font-size:14px;background:#000;z-index:5;display:none;color:#fff;-webkit-box-shadow:0 0 5px rgba(0,0,0,.6);box-shadow:0 0 5px rgba(0,0,0,.6)}.danplayer div.interactive-layer .toast.show{display:block}.danplayer div.interactive-layer .float{background:rgba(21,21,21,.9);border-radius:2px;display:none;position:absolute;z-index:4}.danplayer div.interactive-layer .float.show{display:block}.danplayer div.interactive-layer .float.loading{padding:6px 10px;color:#fff}.danplayer div.interactive-layer .danmaku-style-layer{font-size:12px;padding:10px;color:#fff}.danplayer div.interactive-layer .danmaku-style-layer>div{margin-top:10px}.danplayer div.interactive-layer .danmaku-style-layer .types{display:-webkit-box;display:-ms-flexbox;display:flex}.danplayer div.interactive-layer .danmaku-style-layer .types .type{color:hsla(0,0%,100%,.5);cursor:pointer;margin:0 10px;text-align:center}.danplayer div.interactive-layer .danmaku-style-layer .types .type:hover{color:#fff}.danplayer div.interactive-layer .danmaku-style-layer .types .type>div{height:30px}.danplayer div.interactive-layer .danmaku-style-layer .types .type.selected{color:#00a1d6}.danplayer div.interactive-layer .danmaku-style-layer .types .type svg{width:40px;height:40px;padding-left:5px}.danplayer div.interactive-layer .danmaku-style-layer .types .type+.type{margin-left:8px}.danplayer div.interactive-layer .danmaku-style-layer .colors{margin-top:4px;display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;width:240px}.danplayer div.interactive-layer .danmaku-style-layer .colors span{display:inline-block;width:20px;height:20px;cursor:pointer;border:2px solid transparent;border-radius:2px;margin:2px 5px}.danplayer div.interactive-layer .danmaku-style-layer .colors span:hover{border-color:#e7e7e7}.danplayer div.interactive-layer .danmaku-style-layer .colors span.selected{border-color:#00a1d6}.danplayer div.interactive-layer .volume-bar{width:32px;height:100px;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.danplayer div.interactive-layer .volume-bar .volume-num-label{color:#fff!important;text-align:center;font-size:12px;height:28px;line-height:28px;margin-bottom:2px}.danplayer div.interactive-layer .volume-bar .volume-column-bar{position:relative;width:100%;height:60px;cursor:pointer}.danplayer div.interactive-layer .volume-bar .volume-column-bar .bar-ui{width:2px;position:absolute;left:0;right:0;margin:0 auto}.danplayer div.interactive-layer .volume-bar .volume-column-bar .bar-ui.bar-full{height:100%;background:#e7e7e7;top:0}.danplayer div.interactive-layer .volume-bar .volume-column-bar .bar-ui.bar-current{background:#00a1d6;bottom:0}.danplayer div.interactive-layer .volume-bar .volume-column-bar .bar-controller{position:absolute;background:#00a1d6;border-radius:50%;width:12px;height:12px;left:0;right:0;top:-6px;margin:0 auto}.danplayer div.interactive-layer .quality-menu{font-size:14px;padding:5px}.danplayer div.interactive-layer .quality-menu>div{cursor:pointer;text-align:center;padding:2px 5px;color:#c3c3c3}.danplayer div.interactive-layer .quality-menu>div:hover{color:#fff}.danplayer div.interactive-layer .quality-menu>div.current{color:#00a1d6}.danplayer div.interactive-layer .quality-menu>div+>div{margin-top:5px}.danplayer div.interactive-layer .controller-bottom-bar{position:absolute;left:0;bottom:0;width:100%;z-index:3;-webkit-box-sizing:border-box;box-sizing:border-box}.danplayer div.interactive-layer .controller-bottom-bar.show{padding:0 20px 4px 20px}.danplayer div.interactive-layer .controller-bottom-bar.show .progress-bar{display:block;cursor:pointer;margin-bottom:10px;padding:4px 0 8px 0}.danplayer div.interactive-layer .controller-bottom-bar.show .progress-bar .bar-controller{display:block}.danplayer div.interactive-layer .controller-bottom-bar.show .buttons{display:-webkit-box;display:-ms-flexbox;display:flex}.danplayer div.interactive-layer .controller-bottom-bar .time{color:#fff;font-size:12px}.danplayer div.interactive-layer .controller-bottom-bar .progress-bar{position:relative;height:2px;cursor:pointer;display:block}.danplayer div.interactive-layer .controller-bottom-bar .progress-bar .bar-buffer,.danplayer div.interactive-layer .controller-bottom-bar .progress-bar .bar-current,.danplayer div.interactive-layer .controller-bottom-bar .progress-bar .bar-full{height:2px;position:absolute}.danplayer div.interactive-layer .controller-bottom-bar .progress-bar .bar-full{background:hsla(0,0%,100%,.2);z-index:1;width:100%}.danplayer div.interactive-layer .controller-bottom-bar .progress-bar .bar-buffer{background:hsla(0,0%,100%,.5);z-index:2}.danplayer div.interactive-layer .controller-bottom-bar .progress-bar .bar-current{background:#00a1d6;z-index:3}.danplayer div.interactive-layer .controller-bottom-bar .progress-bar .bar-controller{position:absolute;top:-1px;left:-6px;width:12px;height:12px;border-radius:2px;background:#00a1d6;z-index:4;display:none}.danplayer div.interactive-layer .controller-bottom-bar .buttons{display:none;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.danplayer div.interactive-layer .controller-bottom-bar .buttons>*{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.danplayer div.interactive-layer .controller-bottom-bar .buttons .right .button{margin-left:10px}.danplayer div.interactive-layer .controller-bottom-bar .buttons .button{color:hsla(0,0%,100%,.7);cursor:pointer;display:inline-block;font-size:12px}.danplayer div.interactive-layer .controller-bottom-bar .buttons .button:hover{color:#fff}.danplayer div.interactive-layer .controller-bottom-bar .buttons .button .icon{width:30px;height:30px}.danplayer div.interactive-layer .controller-bottom-bar .buttons .button.hide{display:none}.danplayer div.interactive-layer .controller-bottom-bar .buttons .button.danmaku-style{margin-top:4px}.danplayer div.interactive-layer .controller-bottom-bar .buttons .button.full-screen svg,.danplayer div.interactive-layer .controller-bottom-bar .buttons .button.picture-in-picture svg,.danplayer div.interactive-layer .controller-bottom-bar .buttons .button.volume svg{width:22px;height:22px}.danplayer div.interactive-layer .controller-bottom-bar .danmaku-form{border-radius:4px;background:hsla(0,0%,100%,.5);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-flex:1;-ms-flex:1;flex:1;padding:0 4px;min-width:200px;max-width:350px;margin-right:20px;color:#fff}.danplayer div.interactive-layer .controller-bottom-bar .danmaku-form input{border:none;height:20px;outline:none;background:transparent;color:#fff;-webkit-box-flex:1;-ms-flex:1;flex:1}.danplayer div.interactive-layer .controller-bottom-bar .danmaku-form .send{color:#fff;border:none;font-size:12px;cursor:pointer;margin-left:10px}.danplayer div.interactive-layer .bg-gradient{position:absolute;bottom:0;left:0;width:100%;height:100px;background:-webkit-gradient(linear,left top,left bottom,from(transparent),to(rgba(0,0,0,.8)));background:linear-gradient(transparent,rgba(0,0,0,.8));opacity:0;-webkit-transition:opacity .2s ease-in-out;transition:opacity .2s ease-in-out;z-index:2}.danplayer div.interactive-layer .bg-gradient.show{opacity:1}.danplayer div.interactive-layer .danmaku-layer{position:absolute;left:0;top:0;z-index:1;cursor:pointer}\", \"\"]);\n// Exports\nmodule.exports = exports;\n"],"sourceRoot":""}