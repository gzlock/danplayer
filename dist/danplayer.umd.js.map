{"version":3,"sources":["webpack://danplayer/webpack/universalModuleDefinition","webpack://danplayer/webpack/bootstrap","webpack://danplayer/./src/player/style.scss?dae5","webpack://danplayer/./node_modules/number-precision/build/index.js","webpack://danplayer/./node_modules/regenerator-runtime/runtime.js","webpack://danplayer/./node_modules/@babel/runtime/regenerator/index.js","webpack://danplayer/./node_modules/current-script-polyfill/currentScript.js","webpack://danplayer/./node_modules/events/events.js","webpack://danplayer/./node_modules/@vue/cli-service/lib/commands/build/setPublicPath.js","webpack://danplayer/./src/player/buttonAndLayer.ts","webpack://danplayer/./src/player/IconButton.ts","webpack://danplayer/./src/player/volumeLayer.ts","webpack://danplayer/./src/player/qualitySelector.ts","webpack://danplayer/./src/player/progressBar.ts","webpack://danplayer/./src/player/danmaku/danmaku.ts","webpack://danplayer/./src/player/danmaku/danmakuDrawer.ts","webpack://danplayer/./src/player/danmaku/canvas.ts","webpack://danplayer/./src/player/danmaku/danmakuLayer.ts","webpack://danplayer/./src/player/danmaku/danmakuStyleLayer.ts","webpack://danplayer/./src/player/danmaku/danmakuForm.ts","webpack://danplayer/./src/player/UI.ts","webpack://danplayer/./src/player/player.ts","webpack://danplayer/./src/player/index.ts","webpack://danplayer/./node_modules/@vue/cli-service/lib/commands/build/entry-lib.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;QCVA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;AClFA,uC;;;;;;;;ACAa;;AAEb,8CAA8C,cAAc;;AAE5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,gBAAgB;AAC/C;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,uBAAuB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,uBAAuB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,uBAAuB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,uBAAuB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,aAAa;AACvC;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AC1IA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd,KAAK;AACL,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yDAAyD;AACzD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,WAAW;AACX;;AAEA;AACA;AACA,wCAAwC,WAAW;AACnD;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,SAAS;AACT;AACA;AACA;AACA;;AAEA;;AAEA,SAAS;AACT;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,oCAAoC,cAAc;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,iCAAiC,kBAAkB;AACnD;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,iBAAiB;;AAEjB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,wBAAwB,iBAAiB;AACzC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,YAAY;AACZ;AACA;;AAEA;AACA,YAAY;AACZ;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,8CAA8C,QAAQ;AACtD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA,WAAW;AACX;AACA;AACA;;AAEA,WAAW;AACX;AACA;AACA;;AAEA,WAAW;AACX;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,8CAA8C,QAAQ;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA,KAAK;;AAEL;AACA,8CAA8C,QAAQ;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,8CAA8C,QAAQ;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,CAAC;AACD;AACA;AACA;AACA;AACA,EAAE,KAA0B,oBAAoB,SAAE;AAClD;;AAEA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACrtBA,iBAAiB,mBAAO,CAAC,MAAqB;;;;;;;;ACA9C;;AAEA;;AAEA;AACA;AACA,wDAAwD;;AAExD;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa,mBAAmB;AAChC;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,CAAC;;;;;;;;;ACnCD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB,sBAAsB;AACvC;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA,cAAc;AACd;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA,mBAAmB,SAAS;AAC5B;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA,iCAAiC,QAAQ;AACzC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB,iBAAiB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,OAAO;AACP;AACA,sCAAsC,QAAQ;AAC9C;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB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","file":"danplayer.umd.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"danplayer\"] = factory();\n\telse\n\t\troot[\"danplayer\"] = factory();\n})((typeof self !== 'undefined' ? self : this), function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"fb15\");\n","// extracted by mini-css-extract-plugin","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n/**\r\n * @desc \r\n * 2.3 + 2.4 = 4.6999999999999991.0 - 0.9 = 0.09999999999999998\r\n */\r\n/**\r\n * \r\n * strip(0.09999999999999998)=0.1\r\n */\r\nfunction strip(num, precision) {\r\n    if (precision === void 0) { precision = 12; }\r\n    return +parseFloat(num.toPrecision(precision));\r\n}\r\n/**\r\n * Return digits length of a number\r\n * @param {*number} num Input number\r\n */\r\nfunction digitLength(num) {\r\n    // Get digit length of e\r\n    var eSplit = num.toString().split(/[eE]/);\r\n    var len = (eSplit[0].split('.')[1] || '').length - (+(eSplit[1] || 0));\r\n    return len > 0 ? len : 0;\r\n}\r\n/**\r\n * \r\n * @param {*number} num \r\n */\r\nfunction float2Fixed(num) {\r\n    if (num.toString().indexOf('e') === -1) {\r\n        return Number(num.toString().replace('.', ''));\r\n    }\r\n    var dLen = digitLength(num);\r\n    return dLen > 0 ? strip(num * Math.pow(10, dLen)) : num;\r\n}\r\n/**\r\n * \r\n * @param {*number} num \r\n */\r\nfunction checkBoundary(num) {\r\n    if (_boundaryCheckingState) {\r\n        if (num > Number.MAX_SAFE_INTEGER || num < Number.MIN_SAFE_INTEGER) {\r\n            console.warn(num + \" is beyond boundary when transfer to integer, the results may not be accurate\");\r\n        }\r\n    }\r\n}\r\n/**\r\n * \r\n */\r\nfunction times(num1, num2) {\r\n    var others = [];\r\n    for (var _i = 2; _i < arguments.length; _i++) {\r\n        others[_i - 2] = arguments[_i];\r\n    }\r\n    if (others.length > 0) {\r\n        return times.apply(void 0, [times(num1, num2), others[0]].concat(others.slice(1)));\r\n    }\r\n    var num1Changed = float2Fixed(num1);\r\n    var num2Changed = float2Fixed(num2);\r\n    var baseNum = digitLength(num1) + digitLength(num2);\r\n    var leftValue = num1Changed * num2Changed;\r\n    checkBoundary(leftValue);\r\n    return leftValue / Math.pow(10, baseNum);\r\n}\r\n/**\r\n * \r\n */\r\nfunction plus(num1, num2) {\r\n    var others = [];\r\n    for (var _i = 2; _i < arguments.length; _i++) {\r\n        others[_i - 2] = arguments[_i];\r\n    }\r\n    if (others.length > 0) {\r\n        return plus.apply(void 0, [plus(num1, num2), others[0]].concat(others.slice(1)));\r\n    }\r\n    var baseNum = Math.pow(10, Math.max(digitLength(num1), digitLength(num2)));\r\n    return (times(num1, baseNum) + times(num2, baseNum)) / baseNum;\r\n}\r\n/**\r\n * \r\n */\r\nfunction minus(num1, num2) {\r\n    var others = [];\r\n    for (var _i = 2; _i < arguments.length; _i++) {\r\n        others[_i - 2] = arguments[_i];\r\n    }\r\n    if (others.length > 0) {\r\n        return minus.apply(void 0, [minus(num1, num2), others[0]].concat(others.slice(1)));\r\n    }\r\n    var baseNum = Math.pow(10, Math.max(digitLength(num1), digitLength(num2)));\r\n    return (times(num1, baseNum) - times(num2, baseNum)) / baseNum;\r\n}\r\n/**\r\n * \r\n */\r\nfunction divide(num1, num2) {\r\n    var others = [];\r\n    for (var _i = 2; _i < arguments.length; _i++) {\r\n        others[_i - 2] = arguments[_i];\r\n    }\r\n    if (others.length > 0) {\r\n        return divide.apply(void 0, [divide(num1, num2), others[0]].concat(others.slice(1)));\r\n    }\r\n    var num1Changed = float2Fixed(num1);\r\n    var num2Changed = float2Fixed(num2);\r\n    checkBoundary(num1Changed);\r\n    checkBoundary(num2Changed);\r\n    return times((num1Changed / num2Changed), Math.pow(10, digitLength(num2) - digitLength(num1)));\r\n}\r\n/**\r\n * \r\n */\r\nfunction round(num, ratio) {\r\n    var base = Math.pow(10, ratio);\r\n    return divide(Math.round(times(num, base)), base);\r\n}\r\nvar _boundaryCheckingState = true;\r\n/**\r\n * \r\n * @param flag true false  true\r\n */\r\nfunction enableBoundaryChecking(flag) {\r\n    if (flag === void 0) { flag = true; }\r\n    _boundaryCheckingState = flag;\r\n}\r\nvar index = { strip: strip, plus: plus, minus: minus, times: times, divide: divide, round: round, digitLength: digitLength, float2Fixed: float2Fixed, enableBoundaryChecking: enableBoundaryChecking };\n\nexports.strip = strip;\nexports.plus = plus;\nexports.minus = minus;\nexports.times = times;\nexports.divide = divide;\nexports.round = round;\nexports.digitLength = digitLength;\nexports.float2Fixed = float2Fixed;\nexports.enableBoundaryChecking = enableBoundaryChecking;\nexports['default'] = index;\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","module.exports = require(\"regenerator-runtime\");\n","// document.currentScript polyfill by Adam Miller\n\n// MIT license\n\n(function(document){\n  var currentScript = \"currentScript\",\n      scripts = document.getElementsByTagName('script'); // Live NodeList collection\n\n  // If browser needs currentScript polyfill, add get currentScript() to the document object\n  if (!(currentScript in document)) {\n    Object.defineProperty(document, currentScript, {\n      get: function(){\n\n        // IE 6-10 supports script readyState\n        // IE 10+ support stack trace\n        try { throw new Error(); }\n        catch (err) {\n\n          // Find the second match for the \"at\" string to get file src url from stack.\n          // Specifically works with the format of stack traces in IE.\n          var i, res = ((/.*at [^\\(]*\\((.*):.+:.+\\)$/ig).exec(err.stack) || [false])[1];\n\n          // For all scripts on the page, if src matches or if ready state is interactive, return the script tag\n          for(i in scripts){\n            if(scripts[i].src == res || scripts[i].readyState == \"interactive\"){\n              return scripts[i];\n            }\n          }\n\n          // If no match, return null\n          return null;\n        }\n      }\n    });\n  }\n})(document);\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction $getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return $getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = $getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  var args = [];\n  for (var i = 0; i < arguments.length; i++) args.push(arguments[i]);\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    ReflectApply(this.listener, this.target, args);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      if (typeof listener !== 'function') {\n        throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n      }\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      if (typeof listener !== 'function') {\n        throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n      }\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n","// This file is imported into lib/wc client bundles.\n\nif (typeof window !== 'undefined') {\n  if (process.env.NEED_CURRENTSCRIPT_POLYFILL) {\n    require('current-script-polyfill')\n  }\n\n  var i\n  if ((i = window.document.currentScript) && (i = i.src.match(/(.+\\/)[^/]+\\.js(\\?.*)?$/))) {\n    __webpack_public_path__ = i[1] // eslint-disable-line\n  }\n}\n\n// Indicate to webpack that this file can be concatenated\nexport default null\n","import { Player } from './player'\nimport { UI } from '@/player/UI'\n\nexport class ButtonAndLayer {\n  player: Player\n  ui: UI\n  $btn!: HTMLElement\n  $layer!: HTMLElement\n\n  protected layerHideDelay = 200\n  protected bottomOffset = 40\n  private hideTimeout = -1\n  private _isShow: boolean = false\n\n  get isShow (): boolean {\n    return this._isShow\n  }\n\n  constructor (ui: UI) {\n    this.ui = ui\n    this.player = ui.player\n  }\n\n  protected init () {\n    const mouseenterShowLayer = () => {\n      clearTimeout(this.hideTimeout)\n      this.ui.isMouseInUI = true\n      this.showLayer()\n    }\n    const mouseleaveHideLayer = () => {\n      this.ui.isMouseInUI = false\n      clearTimeout(this.hideTimeout)\n      this.hideTimeout = setTimeout(() => {\n        this.hideLayer()\n      }, this.layerHideDelay)\n    }\n    this.$btn.addEventListener('mouseenter', mouseenterShowLayer)\n    this.$btn.addEventListener('mouseleave', mouseleaveHideLayer)\n\n    this.$layer.addEventListener('mouseenter', mouseenterShowLayer)\n    this.$layer.addEventListener('mouseleave', mouseleaveHideLayer)\n  }\n\n  showLayer () {\n    this._isShow = true\n    this.$layer.classList.add('show')\n    this.updateLayerPosition()\n  }\n\n  hideLayer () {\n    this._isShow = false\n    this.$layer.classList.remove('show')\n  }\n\n  toggleLayer () {\n    if (this._isShow) {\n      this.hideLayer()\n    } else {\n      this.showLayer()\n    }\n  }\n\n  showButton () {\n    this.$btn.style.display = ''\n  }\n\n  hideButton () {\n    this.$btn.style.display = 'none'\n  }\n\n  updateLayerPosition () {\n    if (!this._isShow) return\n    const rootRect = this.ui.player.$root.getBoundingClientRect()\n    const btnRect = this.$btn.getBoundingClientRect()\n    const layerRect = this.$layer.getBoundingClientRect()\n    const left = btnRect.left + (btnRect.width / 2) - rootRect.left - layerRect.width / 2\n\n    this.$layer.style.left = left + 'px'\n    this.$layer.style.bottom = this.bottomOffset + 'px'\n    // console.log('update', { left })\n  }\n\n  destroy () {\n    clearTimeout(this.hideTimeout)\n  }\n}\n","export class IconButton {\n  $root: HTMLElement\n  $use: SVGUseElement\n\n  constructor ($div: HTMLElement) {\n    this.$root = $div\n    this.$use = this.$root.querySelector('use') as SVGUseElement\n  }\n\n  switch (iconAttr: string, titleAttr?: string) {\n    this.switchIcon(iconAttr)\n    if (titleAttr) this.switchTitle(titleAttr)\n  }\n\n  switchIcon (attributeName: string) {\n    this.$use.setAttributeNS('http://www.w3.org/1999/xlink', 'href',\n      '#' + this.$root.getAttribute(attributeName) as string)\n  }\n\n  switchTitle (attributeName: string) {\n    this.$root.setAttribute('title', this.$root.getAttribute(attributeName) as string)\n  }\n}\n","import NP from 'number-precision'\nimport { ButtonAndLayer } from '@/player/buttonAndLayer'\nimport { UI } from '@/player/UI'\nimport { IconButton } from '@/player/IconButton'\n\nNP.enableBoundaryChecking(false)\n\nexport class VolumeLayer extends ButtonAndLayer {\n  $video: HTMLVideoElement\n  $valueLabel: HTMLElement\n  $dragArea: HTMLElement\n  $controller: HTMLElement\n  btn: IconButton\n\n  $current: HTMLElement\n  volumeValue: number = 0\n  private areaHeight: number = 0\n\n  constructor (ui: UI) {\n    super(ui)\n    this.$video = this.player.$video\n    this.$video.addEventListener('volumechange', () => this.updateController())\n    this.$layer = this.player.$root.querySelector('.interactive-layer .volume-bar') as HTMLElement\n    this.$valueLabel = this.$layer.querySelector('.volume-num-label') as HTMLElement\n    this.$btn = this.player.$root.querySelector('.interactive-layer .buttons .button.volume') as HTMLElement\n    this.btn = new IconButton(this.$btn)\n    this.$btn.addEventListener('click', () => this.toggleMuted())\n    this.$dragArea = this.$layer.querySelector('.volume-column-bar') as HTMLElement\n    this.$controller = this.$dragArea.querySelector('.bar-controller') as HTMLElement\n    this.$current = this.$dragArea.querySelector('.bar-current') as HTMLElement\n    this.volumeValue = this.$video.volume = this.player.options.volume\n\n    if (this.volumeValue === 0) {\n      this.volumeValue = 0.7\n    }\n\n    const mousemoveControlVolume = (e: MouseEvent) => {\n      // console.log({ y })\n      let y = e.pageY\n      const rect = this.$dragArea.getBoundingClientRect()\n      if (y < rect.top) {\n        this.$video.volume = 1\n      } else if (y > rect.bottom) {\n        this.$video.volume = 0\n      } else {\n        const range = rect.bottom - rect.top\n        y -= rect.top\n        const value = y / range\n        this.$video.volume = NP.round(1 - value, 2)\n      }\n      this.volumeValue = this.$video.volume\n      this.updateController()\n    }\n    const mouseupReleaseControl = (e: MouseEvent) => {\n      document.removeEventListener('mousemove', mousemoveControlVolume)\n      document.removeEventListener('mouseup', mouseupReleaseControl)\n      mousemoveControlVolume(e)\n    }\n    this.$dragArea.addEventListener('mousedown', () => {\n      document.addEventListener('mousemove', mousemoveControlVolume)\n      document.addEventListener('mouseup', mouseupReleaseControl)\n    })\n\n    this.init()\n    this.updateController()\n  }\n\n  up () {\n    if (this.$video.volume <= 0.9) {\n      this.$video.volume = NP.plus(this.$video.volume, 0.1)\n    } else {\n      this.$video.volume = 1\n    }\n    this.volumeValue = this.$video.volume\n  }\n\n  down () {\n    if (this.$video.volume >= 0.1) {\n      this.$video.volume = NP.minus(this.$video.volume, 0.1)\n    } else {\n      this.$video.volume = 0\n    }\n    this.volumeValue = this.$video.volume\n  }\n\n  toggleMuted () {\n    if (this.$video.volume > 0) {\n      this.$video.volume = 0\n    } else {\n      if (this.volumeValue === 0) {\n        this.$video.volume = 1\n      } else {\n        this.$video.volume = this.volumeValue\n      }\n    }\n    this.updateButton()\n  }\n\n  updateButton () {\n    let attr\n    // console.log('', this.$video.volume)\n    if (this.$video.volume > 0) {\n      attr = 'data-on'\n    } else {\n      attr = 'data-off'\n    }\n    this.btn.switch(attr)\n  }\n\n  updateController () {\n    const value = NP.round(this.$video.volume * 100, 0)\n    this.$valueLabel.innerText = value.toString()\n    let y = this.$video.volume * this.areaHeight\n    this.$current.style.height = y + 'px'\n    y = this.areaHeight - y\n    this.$controller.style.transform = `translateY(${y}px)`\n    this.updateButton()\n  }\n\n  showLayer () {\n    super.showLayer()\n    this.areaHeight = this.$dragArea.clientHeight\n    this.updateController()\n  }\n\n  update () {\n    this.$controller.style.background = this.$current.style.background = this.player.options.color\n  }\n}\n","import { ButtonAndLayer } from '@/player/buttonAndLayer'\nimport { UI } from '@/player/UI'\n\nexport class QualitySelector extends ButtonAndLayer {\n  hls!: Hls\n  private readonly $autoLevel: Element\n  currentLevel = -1\n\n  constructor (ui: UI) {\n    super(ui)\n    this.$btn = this.player.$root.querySelector('.button.quality') as HTMLElement\n    this.$layer = this.player.$root.querySelector('.float.quality-menu') as HTMLElement\n    this.$autoLevel = document.createElement('div')\n    this.$autoLevel.innerHTML = ''\n    this.$autoLevel.setAttribute('data-value', (-1).toString())\n    this.init()\n    this.$layer.addEventListener('click', (e: MouseEvent) => {\n      if (e.target) {\n        const $item = e.target as HTMLElement\n        if ($item.hasAttribute('data-value')) {\n          const value = parseInt($item.getAttribute('data-value') as string)\n          console.log('click', value)\n          if (this.player.hls) {\n            this.player.hls.currentLevel = this.player.hls.loadLevel = value\n            this.currentLevel = value\n          }\n        }\n      }\n      this.updateButton()\n      this.hideLayer()\n    })\n  }\n\n  showButton () {\n    this.$btn.style.display = ''\n  }\n\n  hideButton () {\n    this.$btn.style.display = 'none'\n  }\n\n  showLayer () {\n    super.showLayer()\n    this._updateLevel()\n    this.updateLayerPosition()\n  }\n\n  updateButton () {\n    let name = ''\n    if (this.currentLevel > -1 && this.hls.levels[this.hls.loadLevel]) {\n      name = this.hls.levels[this.hls.loadLevel].name + 'p'\n    }\n    this.$btn.innerText = name\n  }\n\n  private _updateLevel () {\n    this.$layer.innerHTML = ''\n    this.hls.levels.forEach((level, index) => {\n      if (!level.name) return\n      const $item = document.createElement('div') as HTMLElement\n\n      if (index === this.currentLevel) {\n        $item.classList.add('current')\n      }\n      $item.innerText = level.name + 'P'\n      $item.setAttribute('data-value', index.toString())\n      this.$layer.append($item)\n    })\n    if (this.currentLevel === -1) {\n      this.$autoLevel.classList.add('current')\n    } else {\n      this.$autoLevel.classList.remove('current')\n    }\n    this.$layer.append(this.$autoLevel)\n  }\n\n  updateLevel (video: Hls) {\n    this.hls = video\n    this._updateLevel()\n    this.updateLayerPosition()\n    this.updateButton()\n  }\n}\n","import { Player } from '@/player/player'\nimport { UI } from '@/player/UI'\n\nexport class ProgressBar {\n  private player: Player\n  private ui: UI\n  private readonly $root: HTMLElement\n  private $controller: HTMLElement\n  private $current: HTMLElement\n  private $buffer: HTMLElement\n  private $time: HTMLElement\n\n  private barWidth: number = 0\n  private _currentTime = 0\n  private percent = 0\n  private offsetWidth = 0\n\n  constructor (ui: UI) {\n    this.player = ui.player\n    this.ui = ui\n    this.$root = this.player.$root.querySelector('.progress-bar') as HTMLElement\n    this.$controller = this.$root.querySelector('.bar-controller') as HTMLElement\n    this.$current = this.$root.querySelector('.bar-current') as HTMLElement\n    this.$time = this.player.$root.querySelector('.controller-bottom-bar .time') as HTMLElement\n\n    this.$buffer = this.$root.querySelector('.bar-buffer') as HTMLElement\n    this.player.$video.addEventListener('timeupdate', () => {\n      this._currentTime = this.player.$video.currentTime\n      this.percent = this._currentTime / this.player.$video.duration\n      this.time()\n      this.update()\n    })\n    this.player.$video.addEventListener('progress', () => {\n      this.updateBufferBar()\n      this.time()\n    })\n    const mouseMoveChangeTime = (e: MouseEvent) => {\n      const playerRect = this.player.$root.getBoundingClientRect()\n      let x = e.pageX - playerRect.left - this.offsetWidth / 2\n      if (x < 0) {\n        x = 0\n      } else if (x > this.barWidth) {\n        x = this.barWidth\n      }\n      this.percent = x / this.barWidth\n      this.player.$video.currentTime = this.percent * this.player.$video.duration\n      this.update()\n      this.ui.isMouseInUI = true\n    }\n    const mouseup = () => {\n      document.removeEventListener('mousemove', mouseMoveChangeTime)\n      document.removeEventListener('mouseup', mouseup)\n    }\n    this.$root.addEventListener('mousedown', () => {\n      document.addEventListener('mousemove', mouseMoveChangeTime)\n      document.addEventListener('mouseup', mouseup)\n    })\n\n    this.$root.addEventListener('click', mouseMoveChangeTime)\n\n    this.offsetWidth = this.player.width - this.$root.clientWidth\n    this.resize()\n  }\n\n  private time () {\n    if (this.player.options.live) return\n    this.$time.innerText = ProgressBar.getTimeString(this.player.$video.currentTime) +\n      ' / ' + ProgressBar.getTimeString(this.player.$video.duration)\n  }\n\n  private static getTimeString (s: number): string {\n    let time = []\n    // \n    let temp: string | number = Math.floor(s / (60 * 60))\n    if (temp > 0) {\n      if (temp.toString().length === 1) {\n        temp = '0' + temp\n      }\n      time.push(temp)\n    }\n\n    // \n    temp = Math.floor(s / 60) - Math.floor(s / 3600) * 60\n    if (temp.toString().length === 1) {\n      temp = '0' + temp\n    }\n    time.push(temp)\n\n    // \n    temp = Math.floor(s) - Math.floor(s / 60) * 60\n    if (temp.toString().length === 1) {\n      temp = '0' + temp\n    }\n    time.push(temp)\n    return time.join(':')\n  }\n\n  resize () {\n    this.barWidth = this.player.width - this.offsetWidth\n    // console.log(' ', this.barWidth, this.player.$root.clientWidth)\n    this.update()\n    this.updateBufferBar()\n  }\n\n  update () {\n    const x = this.barWidth * this.percent\n    this.$current.style.width = x + 'px'\n    this.$controller.style.transform = `translateX(${x}px)`\n    this.$controller.style.background = this.player.options.color\n    this.$current.style.background = this.player.options.color\n  }\n\n  resetTimeZone () {\n    if (this.player.options.live) {\n      this.$time.innerText = ''\n    } else {\n      this.$time.innerText = ''\n    }\n  }\n\n  updateBufferBar () {\n    for (let i = 0; i < this.player.$video.buffered.length; i++) {\n      const start = this.player.$video.buffered.start(i)\n      const end = this.player.$video.buffered.end(i)\n      if (start < this._currentTime && this._currentTime < end) {\n        this.$buffer.style.width = end / this.player.$video.duration * this.barWidth + 'px'\n      }\n    }\n  }\n}\n","export const enum DanmakuType {\n  Top,\n  Flow,\n  Bottom\n}\n\ninterface iDanmakuContextMeuEvent {\n  readonly danmaku: Danmaku\n}\n\ndeclare var DanmakuContextMeuEvent: {\n  prototype: iDanmakuContextMeuEvent;\n  new (type: string, eventInitDict?: MouseEventInit): MouseEvent;\n}\n\nexport interface DanmakuOptions {\n  // \n  currentTime: number\n  type: DanmakuType\n  borderColor: string\n  fill: string\n  id: string | number\n  fontSize: string | number,\n}\n\nexport function MakeDanmakuOptions ({\n  currentTime = 0,\n  borderColor = '',\n  fill = '#ffffff',\n  type = DanmakuType.Flow,\n  id = '',\n  fontSize = 28\n}: Partial<DanmakuOptions>): DanmakuOptions {\n  return { currentTime, type, borderColor, fill, id, fontSize }\n}\n\nexport class Danmaku implements DanmakuOptions {\n  text: string\n  borderColor!: string\n  currentTime!: number\n  fill!: string\n  type!: DanmakuType\n  id!: string\n  fontSize!: string | number\n\n  constructor (text: string, options?: Partial<DanmakuOptions>) {\n    this.text = text\n    Object.assign(this, MakeDanmakuOptions(options || {}))\n  }\n}\n","import { Danmaku } from '@/player/danmaku/danmaku'\n\nconst font = 'px \"Hiragino Sans GB\", \"Microsoft YaHei\", \"WenQuanYi Micro Hei\", sans-serif'\n\nexport class DanmakuDrawer {\n  selfCanvas: HTMLCanvasElement\n  ctx: CanvasRenderingContext2D\n  danmaku!: Danmaku\n  top: number = 0\n  left: number = 0\n  width: number = 0\n  height: number = 0\n\n  enable: boolean = false\n\n  constructor () {\n    this.selfCanvas = document.createElement('canvas')\n    this.selfCanvas.width = 100\n    this.selfCanvas.height = 100\n    this.ctx = this.selfCanvas.getContext('2d') as CanvasRenderingContext2D\n  }\n\n  protected getSize () {\n    this.ctx.textBaseline = 'top'\n    this.ctx.textAlign = 'left'\n    this.ctx.font = this.danmaku.fontSize + font\n    this.width = this.ctx.measureText(this.danmaku.text).width\n    this.height = this.ctx.measureText('M').width * 1.2\n  }\n\n  protected draw () {\n    const width = this.width + 4\n    const height = this.height\n    this.selfCanvas.width = width\n    this.selfCanvas.height = height\n    this.ctx.textBaseline = 'top'\n    this.ctx.textAlign = 'left'\n    this.ctx.font = this.danmaku.fontSize + font\n    this.ctx.clearRect(0, 0, width, height)\n    if (this.danmaku.borderColor) {\n      this.ctx.strokeStyle = this.danmaku.borderColor\n      this.ctx.strokeRect(1, 1, width - 4, height - 4)\n    }\n    this.ctx.strokeStyle = '#000000'\n    this.ctx.strokeText(this.danmaku.text, 1, 1)\n    this.ctx.fillStyle = this.danmaku.fill\n    this.ctx.fillText(this.danmaku.text, 1, 1)\n  }\n}\n\nexport class DanmakuFlowDrawer extends DanmakuDrawer {\n  set (danmaku: Danmaku, left: number, top: number) {\n    this.danmaku = danmaku\n    this.enable = true\n    this.left = left\n    this.top = top\n    this.getSize()\n    this.draw()\n  }\n\n  update (canvasWidth: number, duration: number, lastFrameTime: number) {\n    const speed = (canvasWidth + this.width) / duration * lastFrameTime\n    this.left = this.left - speed\n    this.enable = (this.left + this.width) > 0\n  }\n}\n\nexport class DanmakuFixedDrawer extends DanmakuDrawer {\n  timeout: number = 0\n\n  set (danmaku: Danmaku, timeout: number, canvasWidth: number, top: number) {\n    this.danmaku = danmaku\n    this.timeout = timeout\n    this.enable = true\n    this.getSize()\n    this.left = (canvasWidth - this.width) / 2\n    this.top = top\n    this.draw()\n    this.update(0)\n  }\n\n  update (lastFrameTime: number) {\n    console.log({ timeout: this.timeout, lastFrameTime })\n    this.timeout -= lastFrameTime\n    this.enable = this.timeout > 0\n  }\n}\n","import { Player } from '@/player/player'\nimport { DanmakuDrawer } from '@/player/danmaku/danmakuDrawer'\nimport { Danmaku } from '@/player/danmaku/danmaku'\n\nconst font = 'px \"Hiragino Sans GB\", \"Microsoft YaHei\", \"WenQuanYi Micro Hei\", sans-serif'\n\nexport class Canvas {\n  private player: Player\n  $canvas: HTMLCanvasElement\n  private ctx: CanvasRenderingContext2D\n\n  private caches: DanmakuDrawer[] = []\n\n  constructor (player: Player) {\n    this.player = player\n    this.$canvas = player.$root.querySelector('canvas') as HTMLCanvasElement\n    this.ctx = this.$canvas.getContext('2d') as CanvasRenderingContext2D\n\n    this.$canvas.addEventListener('click', () => {\n      player.toggle()\n    })\n  }\n\n  addDrawer (drawer: DanmakuDrawer) {\n    this.caches.push(drawer)\n  }\n\n  removeDrawer (drawer: DanmakuDrawer) {\n    const index = this.caches.indexOf(drawer)\n    if (index > -1) this.caches.splice(index, 1)\n  }\n\n  renderAll () {\n    this.clear()\n    if (this.caches.length > 0) {\n      for (let i = 0; i < this.caches.length; i++) {\n        const drawer = this.caches[i]\n        this.ctx.drawImage(drawer.selfCanvas, drawer.left, drawer.top)\n      }\n    }\n  }\n\n  clear () {\n    this.ctx.clearRect(0, 0, this.player.width, this.player.height)\n  }\n\n  clearCache () {\n    this.caches.length = 0\n  }\n\n  set alpha (val: number) {\n    this.ctx.globalAlpha = val\n  }\n\n  fontHeight (fontSize: number): number {\n    this.ctx.font = fontSize + font\n    const size = this.ctx.measureText('M')\n    return size.width * 1.2\n  }\n\n  fontWidth (drawer: DanmakuDrawer): number {\n    this.ctx.font = drawer.danmaku.fontSize + font\n    const size = this.ctx.measureText(drawer.danmaku.text)\n    return size.width\n  }\n\n  resize () {\n    this.$canvas.setAttribute('width', this.player.width + 'px')\n    this.$canvas.setAttribute('height', this.player.height + 'px')\n  }\n}\n","import { Player } from '@/player/player'\nimport { Danmaku, DanmakuType } from '@/player/danmaku/danmaku'\nimport { DanmakuDrawer, DanmakuFixedDrawer, DanmakuFlowDrawer } from './danmakuDrawer'\nimport { EventEmitter } from 'events'\nimport { Canvas } from '@/player/danmaku/canvas'\n\nexport enum LimitType {\n  UnLimited = 0, // \n  UnOverlap = 1, // \n  Percent25 = 1 / 4, // 25%\n  Half = 0.5, // 50%\n  Percent75 = 1 / 4, // 75%\n}\n\nexport interface DanmakuLayerOptions {\n  alpha: number\n  enable: boolean\n  flowDuration: number\n  fadeoutDuration: number\n  limit: LimitType // \n  contextMenu: ((d: DanmakuDrawer) => { [name: string]: () => void }) | undefined\n}\n\nconst template = '<div class=\"content\"></div><div class=\"buttons\"><span class=\"copy\"></span></div>'\n\nfunction MakeDanmakuDrawerMenu (d: DanmakuDrawer, menus: { [p: string]: () => void }, copyFn: (text: string) => void): HTMLDivElement {\n  const $div = document.createElement('div')\n  $div.innerHTML = template\n  const $content = $div.querySelector('.content') as HTMLElement\n  $content.innerText = d.danmaku.text\n  const $buttons = $div.querySelector('.buttons') as HTMLDivElement\n  for (let key in menus) {\n    const $span = document.createElement('span')\n    $span.innerText = key\n    $span.onclick = menus[key]\n    $buttons.prepend($span)\n  }\n  const $copy = $div.querySelector('.copy') as HTMLElement\n  if ($copy) {\n    $copy.addEventListener('click', () => copyFn(d.danmaku.text))\n  }\n\n  return $div\n}\n\nexport function MakeDanmakuLayerOptions ({\n  alpha = 1,\n  enable = true,\n  flowDuration = 8,\n  fadeoutDuration = 5,\n  limit = LimitType.UnOverlap,\n  contextMenu = undefined\n}: Partial<DanmakuLayerOptions> = {}): DanmakuLayerOptions {\n  return { alpha, enable, flowDuration, limit, fadeoutDuration, contextMenu }\n}\n\nexport class DanmakuLayer {\n  private player: Player\n  private readonly canvas: Canvas\n  private $menu!: HTMLElement\n\n  // \n  danmakus: Danmaku[] = []\n  showed: Danmaku[] = []\n\n  // \n  topEnables: DanmakuFixedDrawer[] = []\n  topAndBottomDisables: DanmakuFixedDrawer[] = []\n  bottomEnables: DanmakuFixedDrawer[] = []\n  flowEnables: DanmakuFlowDrawer[] = []\n  flowDisables: DanmakuFlowDrawer[] = []\n  private readonly lineHeights: number[] = []\n  private readonly topLines: { [height: string]: DanmakuDrawer | null } = {}\n  private readonly bottomLines: any = {}\n  private readonly flowLines: any = {}\n  private displayArea: number = 0\n\n  private topY = 0\n  private flowY = 0\n  private bottomY = 0\n\n  // \n  private frameTime: number = 0\n  // \n  private calcDanmakuTime: number = 0\n\n  isShow = true\n\n  private width = 0\n  private height = 0\n  private calcTopInterval: number = -1\n  private destroied: boolean = false\n\n  private event: EventEmitter\n  private addDanmakuToCanvasTime: number = 0\n  private lastFrame: number = 0\n  private lineHeight!: number\n\n  constructor (player: Player) {\n    this.player = player\n    this.event = new EventEmitter()\n\n    this.canvas = new Canvas(player)\n\n    const hideMenu = () => {\n      document.removeEventListener('click', hideMenu)\n      document.removeEventListener('contextmenu', hideMenu)\n      this.$menu.remove()\n    }\n\n    this.canvas.$canvas.addEventListener('contextmenu', (e: MouseEvent) => {\n      const found = this.findDrawers(e)\n      if (found.length > 0) {\n        this.createDanmakuMenu(found)\n\n        let x = e.pageX\n        let y = e.pageY\n        const right = e.clientX + this.$menu.clientWidth\n        const bottom = e.clientY + this.$menu.clientHeight\n\n        if (right > document.body.clientWidth) {\n          x -= right - document.body.clientWidth\n        }\n        if (bottom > document.body.clientHeight) {\n          y -= bottom - document.body.clientHeight\n        }\n        this.$menu.style.left = x + 'px'\n        this.$menu.style.top = y + 'px'\n        document.addEventListener('click', hideMenu)\n        document.addEventListener('touchstart', hideMenu)\n        document.addEventListener('contextmenu', hideMenu)\n      }\n      e.preventDefault()\n      e.stopPropagation()\n      return false\n    })\n\n    this.player.$video.addEventListener('seeked', () => {\n      this.clear()\n    })\n\n    if (this.player.options.danmaku.enable) {\n      this.show()\n    } else {\n      this.hide()\n    }\n    this.loop()\n  }\n\n  private createDanmakuMenu (drawers: DanmakuDrawer[]) {\n    if (this.$menu) this.$menu.remove()\n    this.$menu = document.createElement('div')\n    this.$menu.className = 'float show danmaku-context-menu'\n    for (let i = 0; i < drawers.length; i++) {\n      const drawer = drawers[i]\n      if (this.player.options.danmaku.contextMenu) {\n        const $menu = MakeDanmakuDrawerMenu(drawer, this.player.options.danmaku.contextMenu(drawer), text => this.copyText(text))\n        this.$menu.append($menu)\n      }\n    }\n    document.body.append(this.$menu)\n  }\n\n  show () {\n    this.isShow = true\n  }\n\n  hide () {\n    this.isShow = false\n    this.canvas.clear()\n  }\n\n  clear () {\n    this.showed.length = 0\n    this.canvas.clear()\n    this.canvas.clearCache()\n    this.topAndBottomDisables.push(...this.topEnables)\n    this.topEnables.length = 0\n    this.flowDisables.push(...this.flowEnables)\n    this.flowEnables.length = 0\n  }\n\n  resize () {\n    this.width = this.player.$root.clientWidth\n    this.height = this.player.$root.clientHeight\n    this.lineHeight = Math.round(this.canvas.fontHeight(this.player.options.fontSize))\n\n    this.lineHeights.length = 0\n    // resize\n    for (let y = 0; y < window.screen.height; y++) {\n      const height = y * this.lineHeight\n      if (height > window.screen.height) break\n      this.lineHeights.push(height)\n\n      if (!this.topLines.hasOwnProperty(height)) {\n        this.topLines[height] = null\n      }\n      if (!this.bottomLines.hasOwnProperty(height)) {\n        this.bottomLines[height] = []\n      }\n      if (!this.flowLines.hasOwnProperty(height)) {\n        this.flowLines[height] = []\n      }\n    }\n\n    this.canvas.resize()\n    const limit = this.player.options.danmaku.limit\n    if (limit === LimitType.Percent75) {\n      this.displayArea = this.player.height * 0.75\n    } else if (limit === LimitType.Half) {\n      this.displayArea = this.player.height * 0.5\n    } else if (limit === LimitType.Percent25) {\n      this.displayArea = this.player.height * 0.25\n    } else {\n      this.displayArea = this.player.height\n    }\n    this.canvas.alpha = this.player.options.danmaku.alpha\n    this.canvas.renderAll()\n  }\n\n  toggle (): void {\n    if (this.isShow) {\n      this.hide()\n    } else {\n      this.show()\n    }\n  }\n\n  send (d: Danmaku) {\n    d.text = d.text.trim()\n    this.danmakus.push(d)\n  }\n\n  private findDrawers (e: MouseEvent): DanmakuDrawer[] {\n    return [\n      ...this.topEnables.filter(drawer => DanmakuLayer.find(e, drawer)),\n      ...this.bottomEnables.filter(drawer => DanmakuLayer.find(e, drawer)),\n      ...this.flowEnables.filter(drawer => DanmakuLayer.find(e, drawer))\n    ]\n  }\n\n  private static find (e: MouseEvent, drawer: DanmakuDrawer): boolean {\n    if (e.offsetX > drawer.left && e.offsetX < (drawer.left + drawer.width)) {\n      if (e.offsetY > drawer.top && e.offsetY < (drawer.top + drawer.height)) {\n        return true\n      }\n    }\n    return false\n  }\n\n  private addDanmakuToCanvas () {\n    if (this.danmakus.length === 0) return\n    for (let i = 0; i < this.danmakus.length; i++) {\n      const danmaku = this.danmakus[i]\n      const time = Math.abs(this.player.currentTime - danmaku.currentTime)\n      if (this.showed.includes(danmaku)) continue\n      if (time > 0.1) continue\n      this.showed.push(danmaku)\n\n      let top\n      if (danmaku.type === DanmakuType.Flow) {\n        let drawer = this.flowDisables.shift() || new DanmakuFlowDrawer()\n        drawer.enable = true\n        drawer.set(danmaku, this.width, this.calcFlowTop(drawer))\n        drawer.update(this.width, this.player.options.danmaku.flowDuration, 0)\n        this.flowEnables.push(drawer)\n        this.canvas.addDrawer(drawer)\n      } else {\n        let drawer = this.topAndBottomDisables.shift() || new DanmakuFixedDrawer()\n        drawer.enable = true\n        if (danmaku.type === DanmakuType.Top) {\n          drawer.set(danmaku, this.player.options.danmaku.fadeoutDuration, this.width, this.calcTopTop(drawer))\n          this.topEnables.push(drawer)\n        } else {\n          let top = this.calcBottomTop(drawer) + this.lineHeight\n          top = this.height - top\n          drawer.set(danmaku, this.player.options.danmaku.fadeoutDuration, this.width, top)\n          this.bottomEnables.push(drawer)\n        }\n        drawer.update(0)\n        this.canvas.addDrawer(drawer)\n      }\n      this.canvas.renderAll()\n    }\n  }\n\n  $input!: HTMLInputElement\n\n  copyText (text: string) {\n    if (!this.$input) {\n      this.$input = this.player.$root.querySelector('input.copy-tool') as HTMLInputElement\n    }\n    this.$input.value = text\n    this.$input.select()\n    document.execCommand('copy')\n  }\n\n  private calcFlowTop (drawer: DanmakuFlowDrawer): number {\n    for (let key in this.flowLines) {\n      const _d: DanmakuDrawer = this.flowLines[key]\n      const height = Number(key)\n      const right = _d.left + _d.width\n      if (_d && _d.enable && right > this.width) continue\n      if (height > this.displayArea) break\n      console.log('', key)\n      this.flowLines[key] = drawer\n      this.flowY = height\n      return height\n    }\n    this.flowY += this.lineHeight\n    if (this.flowY > this.displayArea) this.flowY = 0\n    this.flowLines[this.flowY] = drawer\n    return this.flowY\n  }\n\n  private calcTopTop (drawer: DanmakuFixedDrawer): number {\n    for (let key in this.topLines) {\n      const _d = this.topLines[key]\n      const height = Number(key)\n      if (_d && _d.enable) continue\n      if (height > this.displayArea) break\n      console.log('', key)\n      this.topLines[key] = drawer\n      this.topY = height\n      return height\n    }\n    this.topY += this.lineHeight\n    if (this.topY > this.displayArea) this.topY = 0\n    this.topLines[this.topY] = drawer\n    return this.topY\n  }\n\n  private calcBottomTop (drawer: DanmakuFixedDrawer): number {\n    for (let key in this.bottomLines) {\n      const _d = this.bottomLines[key]\n      const height = Number(key)\n      if (_d && _d.enable) continue\n      if (height > this.displayArea) break\n      console.log('', key)\n      this.bottomLines[key] = drawer\n      this.bottomY = height\n      return height\n    }\n    this.bottomY += this.lineHeight\n    if (this.bottomY > this.displayArea) this.bottomY = 0\n    this.bottomLines[this.bottomY] = drawer\n    return this.bottomY\n  }\n\n  /**\n   * \n   */\n  private drawDanmaku () {\n    this.topEnables = this.topEnables.filter(drawer => {\n      if (drawer.enable) {\n        drawer.update(this.frameTime)\n        return true\n      } else {\n        this.canvas.removeDrawer(drawer)\n        this.topAndBottomDisables.push(drawer)\n        return false\n      }\n    })\n\n    this.bottomEnables = this.bottomEnables.filter(drawer => {\n      if (drawer.enable) {\n        drawer.update(this.frameTime)\n        return true\n      } else {\n        this.canvas.removeDrawer(drawer)\n        this.topAndBottomDisables.push(drawer)\n        return false\n      }\n    })\n\n    this.flowEnables = this.flowEnables.filter(drawer => {\n      if (drawer.enable) {\n        drawer.update(this.width, this.player.options.danmaku.flowDuration, this.frameTime)\n        return true\n      } else {\n        this.canvas.removeDrawer(drawer)\n        this.flowDisables.push(drawer)\n        return false\n      }\n    })\n  }\n\n  private loop () {\n    if (this.destroied) return\n    this.addDanmakuToCanvas()\n    this.addDanmakuToCanvasTime = (Date.now() - this.lastFrame) / 1000\n    if (!this.player.paused) {\n      this.drawDanmaku()\n      this.calcDanmakuTime = (Date.now() - this.lastFrame) / 1000\n\n      if (this.isShow) {\n        this.canvas.renderAll()\n      } else {\n        this.canvas.clear()\n      }\n    }\n    this.frameTime = (Date.now() - this.lastFrame) / 1000\n    this.lastFrame = Date.now()\n    window.requestAnimationFrame(() => { this.loop() })\n  }\n\n  destroy () {\n    this.destroied = true\n    clearInterval(this.calcTopInterval)\n    if (this.$menu) {\n      this.$menu.remove()\n    }\n  }\n\n  get debug (): Object {\n    return {\n      isShow: this.isShow,\n      all: this.danmakus.length,\n      showed: this.showed.length,\n      // \n      time: {\n        addDanmakuToCanvas: this.addDanmakuToCanvasTime,\n        drawDanmaku: this.calcDanmakuTime,\n        frameTime: this.frameTime\n      },\n      'on screen danmakus': {\n        top: this.topEnables.length,\n        bottom: this.bottomEnables.length,\n        flow: this.flowEnables.length\n      },\n      'danmaku pool': {\n        fixed: this.topAndBottomDisables.length,\n        flow: this.flowDisables.length\n      },\n      positionY: {\n        top: this.topY,\n        flow: this.flowY,\n        bottom: this.bottomY\n      }\n    }\n  }\n}\n","import { ButtonAndLayer } from '@/player/buttonAndLayer'\nimport { UI } from '@/player/UI'\nimport { DanmakuOptions, DanmakuType, MakeDanmakuOptions } from '@/player/danmaku/danmaku'\n\nconst template =\n  `<div>\n<div class=\"types\">\n  <div class=\"type\" data-type=\"1\"><div><svg class=\"icon\"><use xlink:href=\"#danplayer-danmugundongkai\"></use></svg></div></div>\n  <div class=\"type\" data-type=\"0\"><div><svg class=\"icon\"><use xlink:href=\"#danplayer-danmudingbukai\"></use></svg></div></div>\n  <div class=\"type\" data-type=\"2\"><div><svg class=\"icon\"><use xlink:href=\"#danplayer-danmudibukai\"></use></svg></div></div>\n</div>\n</div>\n<div>\n<div class=\"colors\">\n{colors}\n</div>\n</div>`\n\nexport class DanmakuStyleLayer extends ButtonAndLayer {\n  private readonly $types: Element[]\n  private readonly $colors: Element[]\n  fill: string = '#ffffff'\n  type: DanmakuType = DanmakuType.Flow\n  static readonly colors = [\n    '#FE0302', '#FF7204', '#FFAA02', '#FFD302', '#FFFF00', '#A0EE00', '#00CD00',\n    '#019899', '#4266BE', '#89D5FF', '#CC0273', '#222222', '#9B9B9B', '#FFFFFF'\n  ]\n\n  constructor (ui: UI) {\n    super(ui)\n    this.$layer = this.player.$root.querySelector('.float.danmaku-style-layer') as HTMLElement\n    this.$btn = this.player.$root.querySelector('.intern-button.danmaku-style') as HTMLElement\n    this.$layer.innerHTML = template.replace('{colors}',\n      DanmakuStyleLayer.colors.map(color => `<span style=\"background: ${color}\" data-color=\"${color}\"></span>`).join(''))\n    this.init()\n    this.$types = Array.from(this.$layer.querySelectorAll<Element>('.types > .type'))\n    this.$colors = Array.from(this.$layer.querySelectorAll<Element>('.colors > span'))\n\n    this.$types.forEach($dom => $dom.addEventListener('click', () => {\n      this.$types.forEach($dom => $dom.classList.remove('selected'))\n      $dom.classList.add('selected')\n      this.type = Number($dom.getAttribute('data-type'))\n    }))\n\n    this.$colors.forEach($dom => $dom.addEventListener('click', () => {\n      this.$colors.forEach($dom => $dom.classList.remove('selected'))\n      $dom.classList.add('selected')\n      this.fill = $dom.getAttribute('data-color') as string\n    }))\n\n    this.$types[0].classList.add('selected')\n    this.$colors[this.$colors.length - 1].classList.add('selected')\n  }\n\n  public getStyle (): Partial<DanmakuOptions> {\n    return { fill: this.fill, type: this.type, borderColor: 'white' }\n  }\n}\n","import { UI } from '@/player/UI'\nimport { DanmakuStyleLayer } from '@/player/danmaku/danmakuStyleLayer'\nimport { Danmaku } from '@/player/danmaku/danmaku'\n\nexport class DanmakuForm {\n  ui: UI\n  $root: HTMLElement\n  $btn: HTMLElement\n  $input: HTMLInputElement\n  isShow = false\n  styleLayer: DanmakuStyleLayer\n\n  constructor (ui: UI) {\n    this.ui = ui\n    this.styleLayer = new DanmakuStyleLayer(ui)\n\n    this.$root = ui.player.$root.querySelector('.danmaku-form') as HTMLElement\n    this.$input = this.$root.querySelector('input') as HTMLInputElement\n    this.$btn = this.$root.querySelector('.send') as HTMLElement\n    this.$btn.addEventListener('click', () => this.send())\n    this.$input.addEventListener('keypress', (e: KeyboardEvent) => {\n      // console.log(' keypress', e.key)\n      if (e.key === 'Enter' && this.ui.isShow && this.$input.value) {\n        this.send()\n      }\n    })\n    this.$input.addEventListener('keydown', (e: KeyboardEvent) => {\n      // console.log(' keydown', e.key)\n      if (e.key.startsWith('Arrow') || e.key === ' ') {\n        e.stopPropagation()\n      }\n    })\n    this.$input.addEventListener('keyup', (e: KeyboardEvent) => {\n      // console.log(' keyup', e.key)\n      if (e.key === 'Escape') {\n        this.ui.player.$root.focus()\n        this.ui.hide()\n      }\n      e.stopPropagation()\n    })\n    this.$input.addEventListener('focus', () => { this.ui.isMouseInUI = true })\n    this.$input.addEventListener('blur', () => { this.ui.isMouseInUI = false })\n  }\n\n  send () {\n    const options = this.styleLayer.getStyle()\n    options.currentTime = this.ui.player.currentTime\n    this.ui.danmakuLayer.send(new Danmaku(this.$input.value, options))\n    this.$input.value = ''\n    this.ui.player.$root.focus()\n  }\n\n  toggle () {\n    if (this.isShow) {\n      this.hide()\n    } else {\n      this.show()\n    }\n  }\n\n  show () {\n    this.isShow = true\n    this.$root.style.display = ''\n  }\n\n  hide () {\n    this.isShow = false\n    this.$root.style.display = 'none'\n  }\n\n  update () {\n  }\n\n  focus () {\n    this.$input.focus()\n  }\n}\n","import { Player } from '@/player/player'\nimport { VolumeLayer } from '@/player/volumeLayer'\nimport { QualitySelector } from '@/player/qualitySelector'\nimport { ProgressBar } from '@/player/progressBar'\nimport { DanmakuLayer } from '@/player/danmaku/danmakuLayer'\nimport { DanmakuStyleLayer } from '@/player/danmaku/danmakuStyleLayer'\nimport { DanmakuForm } from '@/player/danmaku/danmakuForm'\nimport { IconButton } from '@/player/IconButton'\n\nexport class UI {\n  qualitySelector: QualitySelector\n\n  private _isMouseInUI: boolean = false\n  danmakuLayer: DanmakuLayer\n  player: Player\n  isShow: boolean = false\n\n  private $root: HTMLElement\n\n  // \n  private btnPlay: IconButton\n  private btnFullScreen: IconButton\n  private btnShowDanmaku: IconButton\n  private $gradientBG: HTMLElement\n  private extraButtons: Element[] = []\n\n  volume: VolumeLayer\n  progressBar: ProgressBar\n  styleLayer: DanmakuStyleLayer\n  danmakuForm: DanmakuForm\n\n  // \n  private $controllerButtonsRightLayout: Element\n\n  private hideTimeout = -1\n\n  constructor (player: Player) {\n    this.player = player\n    this.$root = player.$root.querySelector('.interactive-layer .controller-bottom-bar') as HTMLElement\n    this.$root.addEventListener('mouseenter', () => {\n      this.isMouseInUI = true\n    })\n    this.$root.addEventListener('mouseleave', () => {\n      this.isMouseInUI = false\n    })\n    this.$gradientBG = player.$root.querySelector('.bg-gradient') as HTMLElement\n\n    this.volume = new VolumeLayer(this)\n    this.qualitySelector = new QualitySelector(this)\n    this.progressBar = new ProgressBar(this)\n    this.styleLayer = new DanmakuStyleLayer(this)\n    this.danmakuForm = new DanmakuForm(this)\n\n    this.$controllerButtonsRightLayout = this.$root.querySelector('.buttons .right') as Element\n\n    this.btnFullScreen = new IconButton(this.$root.querySelector('.button.full-screen') as HTMLElement)\n    this.btnFullScreen.$root.addEventListener('click', async () => {\n      await this.player.toggleFullScreen()\n      this.updateFullScreenButton()\n    })\n\n    this.btnPlay = new IconButton(this.$root.querySelector('.button.play') as HTMLElement)\n    this.btnPlay.$root.addEventListener('click', () => {\n      this.player.toggle()\n      this.updatePlayButton()\n    })\n\n    this.btnShowDanmaku = new IconButton(this.$root.querySelector('.button.toggle-danamaku') as HTMLElement)\n    this.btnShowDanmaku.$root.addEventListener('click', () => {\n      this.danmakuLayer.toggle()\n      this.updateDanmakuButton()\n    })\n\n    this.danmakuLayer = new DanmakuLayer(player)\n\n    this.insertExtraButtons()\n  }\n\n  set isMouseInUI (val: boolean) {\n    this._isMouseInUI = val\n    this.cancelHideUIDelay()\n  }\n\n  get isMouseInUI () {\n    return this._isMouseInUI\n  }\n\n  show () {\n    this.isShow = true\n    this.$root.classList.add('show')\n    this.$gradientBG.classList.add('show')\n  }\n\n  hide () {\n    this.isShow = false\n    this.$root.classList.remove('show')\n    this.$gradientBG.classList.remove('show')\n    this.qualitySelector.hideLayer()\n    this.volume.hideLayer()\n    this.danmakuForm.styleLayer.hideLayer()\n    this.player.$root.focus()\n  }\n\n  hideUIDelay () {\n    this.cancelHideUIDelay()\n    return new Promise(resolve => {\n      this.hideTimeout = window.setTimeout(() => {\n        this.hide()\n        resolve()\n      }, this.player.options.uiFadeOutDelay)\n    })\n  }\n\n  cancelHideUIDelay () {\n    clearTimeout(this.hideTimeout)\n  }\n\n  clearExtraButtons () {\n    this.extraButtons.forEach($btn => $btn.remove())\n    this.extraButtons.length = 0\n  }\n\n  insertExtraButtons () {\n    this.clearExtraButtons()\n    if (this.player.options.extraButtons) {\n      this.player.options.extraButtons.forEach($btn => {\n        $btn.classList.add('button')\n        $btn.classList.remove('intern-button')\n      })\n      this.$controllerButtonsRightLayout.prepend(...this.player.options.extraButtons)\n      this.extraButtons.push(...this.player.options.extraButtons)\n    }\n  }\n\n  update () {\n    this.updateDanmakuButton()\n    this.updateFullScreenButton()\n    this.updatePlayButton()\n    this.danmakuForm.update()\n    this.progressBar.update()\n    this.volume.update()\n  }\n\n  updatePlayButton () {\n    if (this.player.paused) {\n      this.btnPlay.switch('data-on', 'data-on-title')\n    } else {\n      this.btnPlay.switch('data-off', 'data-off-title')\n    }\n  }\n\n  updateFullScreenButton () {\n    if (this.player.isFullScreen) {\n      this.btnFullScreen.switch('data-off', 'data-off-title')\n    } else {\n      this.btnFullScreen.switch('data-on', 'data-on-title')\n    }\n  }\n\n  updateDanmakuButton () {\n    let attr: string\n    let title: string\n    if (this.danmakuLayer.isShow) {\n      attr = 'data-off'\n      title = 'data-off-title'\n    } else {\n      attr = 'data-on'\n      title = 'data-on-title'\n    }\n    this.btnShowDanmaku.switch(attr, title)\n  }\n\n  resize () {\n    if (this.volume.isShow) this.volume.updateLayerPosition()\n    if (this.qualitySelector.isShow) this.qualitySelector.updateLayerPosition()\n    this.progressBar.resize()\n    this.danmakuLayer.resize()\n  }\n\n  destroy () {\n    clearTimeout(this.hideTimeout)\n    this.danmakuLayer.destroy()\n    this.qualitySelector.destroy()\n    this.volume.destroy()\n  }\n\n  get debug (): Object {\n    return {\n      isShow: this.isShow,\n      isMouseInUI: this._isMouseInUI,\n      danmakuLayer: this.danmakuLayer.debug\n    }\n  }\n}\n","import './style.scss'\nimport { Danmaku } from '@/player/danmaku/danmaku'\nimport { UI } from '@/player/UI'\nimport { DanmakuLayerOptions, MakeDanmakuLayerOptions } from '@/player/danmaku/danmakuLayer'\n\nconst icon = '//at.alicdn.com/t/font_1373341_m9a3piei0s.js'\n\nconst template = `{video-layer}\n<input class=\"copy-tool\" />\n<div class=\"interactive-layer\">\n  <canvas class=\"danmaku-layer\"></canvas>\n  \n  <div class=\"bg-gradient show\"></div>\n  \n  \n  <div class=\"float danmaku-style-layer\"></div>\n  \n  <div class=\"float volume-bar\">\n    <div class=\"volume-num-label\"></div>\n    <div class=\"volume-column-bar\">\n      <div class=\"bar-ui bar-full\"></div>\n      <div class=\"bar-ui bar-current\"></div>\n      <div class=\"bar-controller\"></div>\n    </div>\n  </div>\n  \n  <div class=\"float quality-menu\"></div>\n  \n  <div class=\"controller-bottom-bar\">\n    <div class=\"progress-bar live-hide\">\n      <div class=\"bar-full\"></div>\n      <div class=\"bar-buffer\"></div>\n      <div class=\"bar-current\"></div>\n      <div class=\"bar-controller\"></div>    \n    </div>\n    \n    <div class=\"buttons\">\n      <div class=\"left\">\n        <div class=\"button intern-button play\" data-on=\"danplayer-bofang\" data-off=\"danplayer-zanting\"\n          data-on-title=\"\" data-off-title=\"\">\n          <svg class=\"icon\" aria-hidden=\"true\"><use xlink:href=\"#danplayer-bofang\"></use></svg>\n        </div>\n        <div class=\"time\"></div>\n      </div>\n      \n      <div class=\"middle danmaku-form\">\n        <div class=\"button intern-button danmaku-style\">\n          <svg class=\"icon\"><use xlink:href=\"#danplayer-style\"></use></svg>\n        </div>\n        <input placeholder=\"\" tabindex=\"1\">\n        <div class=\"send\"></div>\n      </div>\n      <div class=\"right\">\n      \n        <div class=\"button intern-button volume\" data-on=\"danplayer-yinliang\" data-off=\"danplayer-jingyin\" title=\"\">\n          <svg class=\"icon\"><use xlink:href=\"#danplayer-yinliang\"></use></svg>\n        </div>\n        \n        <div class=\"button intern-button toggle-danamaku\" title=\"\"\n          data-on=\"danplayer-danmukai\" data-off=\"danplayer-danmuguan\" \n          data-on-title=\"\" data-off-title=\"\">\n          <svg class=\"icon\"><use xlink:href=\"#danplayer-danmukai\"></use></svg>\n        </div>\n        \n        <div class=\"button quality\" title=\"\"></div>\n        \n        <div class=\"button intern-button full-screen\" data-on=\"danplayer-quanping\" data-off=\"danplayer-zuixiaohua\"\n        data-on-title=\"\" data-off-title=\"\">\n          <svg class=\"icon\"><use xlink:href=\"#danplayer-quanping\"></use></svg>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>`\n\ninterface PlayerOptions {\n  /**\n   * \n   * \n   */\n  live: boolean\n\n  // \n  volume: number\n\n  autoplay: boolean,\n\n  fontSize: number,\n\n  // ui \n  uiFadeOutDelay: number\n\n  // \n  width: number | string\n  height: number | string\n\n  // <video src=\"\"></video>src\n  src: string\n\n  // iconfont Symbol \n  iconSrc: string\n\n  // \n  extraButtons: Element[]\n\n  // \n  danmaku: DanmakuLayerOptions\n\n  fullScreen: boolean\n\n  danmakuForm: boolean\n\n  onlyOne: boolean\n\n  color: string\n}\n\nexport interface PlayerPublicOptions {\n  /**\n   * \n   * \n   */\n  live: boolean\n\n  // \n  volume: number\n\n  autoplay: boolean,\n\n  fontSize: number,\n\n  // ui \n  uiFadeOutDelay: number\n\n  // \n  width: number | string\n  height: number | string\n\n  // <video src=\"\"></video>src\n  src: string\n\n  iconSrc: string\n\n  // \n  extraButtons: Element[]\n\n  // \n  danmaku: Partial<DanmakuLayerOptions>\n\n  fullScreen: boolean\n\n  danmakuForm: boolean\n\n  onlyOne: boolean\n\n  color: string\n}\n\nenum VideoType {\n  Normal,\n  Hls,\n  Dash\n}\n\nfunction MakeDefaultOptions ({\n  autoplay = false,\n  color = '#00a1d6',\n  live = false,\n  volume = 0.7,\n  fontSize = 28,\n  width = 600,\n  height = 350,\n  uiFadeOutDelay = 3000,\n  extraButtons = [],\n  src = '',\n  iconSrc = icon,\n  danmakuForm = true,\n  fullScreen = true,\n  danmaku = {},\n  onlyOne = false\n}: Partial<PlayerOptions> | Partial<PlayerPublicOptions>): PlayerOptions {\n  return {\n    autoplay,\n    color,\n    live,\n    fontSize,\n    height,\n    danmaku: MakeDanmakuLayerOptions(danmaku),\n    danmakuForm,\n    fullScreen,\n    src,\n    iconSrc,\n    uiFadeOutDelay,\n    extraButtons,\n    onlyOne,\n    volume,\n    width\n  }\n}\n\nexport class Player {\n  private static instances: Player[] = []\n  $root: HTMLElement\n  $video: HTMLVideoElement\n  type = VideoType.Normal\n  hls?: Hls\n\n  public ui: UI\n\n  // \n  private _width: string = ''\n  private _height: string = ''\n\n  get width () {\n    return this.$root.clientWidth\n  }\n\n  get height () {\n    return this.$root.clientHeight\n  }\n\n  isFullScreen: boolean = false\n\n  private _duration: number = 0\n  private _loading = true\n  private _paused = true\n\n  get loading () {\n    return this._loading\n  }\n\n  public options: PlayerOptions\n\n  constructor ($e: HTMLVideoElement, options?: Partial<PlayerPublicOptions>) {\n    if (!document.querySelector('script#danplayer-icon')) {\n      const $icon = document.createElement('script')\n      $icon.src = icon\n      $icon.id = 'danplayer-icon'\n      document.body.append($icon)\n    }\n    Player.instances.push(this)\n    const parent = $e.parentElement as Element\n    this.$root = document.createElement('div')\n    this.$root.setAttribute('tabIndex', '0')\n    this.$root.classList.add('video-player')\n    parent.insertBefore(this.$root, $e)\n    $e.classList.add('video-layer')\n    $e.removeAttribute('id')\n    this.$root.innerHTML = template.replace('{video-layer}', $e.outerHTML)\n    $e.remove()\n\n    this.$root.addEventListener('keypress', (e: KeyboardEvent) => {\n      // console.log('keypress', e.key)\n      let stop = true\n      if (e.key === 'Enter') {\n        this.ui.show()\n        this.ui.danmakuForm.focus()\n      } else { stop = false }\n      if (stop) {\n        e.stopPropagation()\n        e.preventDefault()\n      }\n    })\n    this.$root.addEventListener('keyup', (e: KeyboardEvent) => {\n      if (e.key === ' ') this.toggle()\n    })\n    document.addEventListener('fullscreenchange', () => {\n      this.isFullScreen = document.fullscreenElement === this.$root\n      this.ui.updateFullScreenButton()\n    })\n\n    this.$root.addEventListener('keydown', (e: KeyboardEvent) => {\n      // console.log('keydown', e.key)\n      let stop = true\n      if (e.key === 'ArrowLeft' && !this.options.live) {\n        this.$video.currentTime -= 5\n      } else if (e.key === 'ArrowRight' && !this.options.live) {\n        this.$video.currentTime += 5\n      } else if (e.key === 'ArrowUp') {\n        this.ui.volume.up()\n      } else if (e.key === 'ArrowDown') {\n        this.ui.volume.down()\n      } else { stop = false }\n      if (stop) {\n        e.stopPropagation()\n        e.preventDefault()\n      }\n    })\n\n    this.$root.addEventListener('mousemove', () => {\n      this.$root.classList.remove('mouse-idle')\n      this.ui.show()\n      if (this.paused) {\n\n      } else {\n        if (this.ui.isMouseInUI) return\n        this.ui.hideUIDelay().then(() => {\n          this.$root.classList.add('mouse-idle')\n        })\n      }\n    })\n\n    this.$root.addEventListener('mouseenter', () => {\n      this.ui.show()\n      this.ui.cancelHideUIDelay()\n    })\n    this.$root.addEventListener('mouseleave', () => {\n      this.ui.hide()\n      this.ui.cancelHideUIDelay()\n    })\n\n    this.$video = this.$root.querySelector('.video-layer') as HTMLVideoElement\n    this.$video.removeAttribute('controls')\n    this.$video.addEventListener('durationchange', () => {\n      // console.log('', this.$video.duration)\n      this._duration = this.$video.duration\n    })\n\n    this.$video.addEventListener('playing', () => this.ui.hideUIDelay())\n\n    this.$video.addEventListener('play', () => this.ui.updatePlayButton())\n    this.$video.addEventListener('pause', () => this.ui.updatePlayButton())\n\n    window.addEventListener('resize', () => this.resizeEvt(1000))\n\n    this.options = MakeDefaultOptions(options || { autoplay: this.$video.hasAttribute('autoplay') })\n\n    this.ui = new UI(this)\n    this.ui.update()\n\n    this._setSrc().then()\n    this._setUI()\n  }\n\n  private async _setSrc () {\n    if (this.options.src) {\n      this.$video.setAttribute('src', this.options.src)\n    }\n\n    await this.getContentType()\n\n    this.ui.qualitySelector.hideButton()\n    if (this.hls) {\n      this.hls.on(Hls.Events.LEVEL_LOADED, () => {\n        this.ui.qualitySelector.updateLevel(this.hls as Hls)\n      })\n      this.ui.qualitySelector.showButton()\n    }\n\n    console.log('_set', { autoplay: this.options.autoplay, paused: this._paused })\n    if (this.options.autoplay || !this.paused) {\n      console.log('_set ')\n      this.play()\n    }\n\n    if (this.options.live) {\n      this.$root.classList.add('live')\n    } else {\n      this.$root.classList.remove('live')\n    }\n  }\n\n  private _setUI () {\n    this.ui.insertExtraButtons()\n\n    this.ui.update()\n\n    this.ui.progressBar.resize()\n\n    this.ui.progressBar.resetTimeZone()\n\n    this.resize()\n  }\n\n  set (options: Partial<PlayerPublicOptions>) {\n    options.danmaku = Object.assign({}, this.options.danmaku, options.danmaku)\n    const newOptions = Object.assign({}, this.options, options)\n    const hasChange = newOptions.src !== this.options.src || this.options.live !== newOptions.live\n    // console.log('set hasChange', hasChange, { nowLive: this.options.live, newLive: newOptions.live })\n    this.options = newOptions\n    if (hasChange) {\n      if (this.hls) {\n        this.hls.detachMedia()\n        this.hls = undefined\n      }\n      this._setSrc().then()\n    }\n    this._setUI()\n  }\n\n  resize () {\n    if (this.options.width) {\n      if (typeof this.options.width === 'number' || parseInt(this.options.width).toString() === this.options.width) {\n        this._width = this.options.width + 'px'\n      } else {\n        this._width = this.options.width\n      }\n    }\n    if (this.options.height) {\n      if (typeof this.options.height === 'number' || parseInt(this.options.height).toString() === this.options.height) {\n        this._height = this.options.height + 'px'\n      } else {\n        this._height = this.options.height\n      }\n    }\n    // console.log('resize options', this.options, { width: this._width, height: this._height })\n    if (!this.isFullScreen) {\n      this.$root.style.width = this._width\n      this.$root.style.height = this._height\n    }\n    this.ui.resize()\n  }\n\n  private delayResize: number = -1\n\n  private resizeEvt (ms: number) {\n    window.clearTimeout(this.delayResize)\n    this.delayResize = window.setTimeout(() => {\n      this.resize()\n    }, ms)\n  }\n\n  /**\n   * \n   */\n  fillDanmakus (array: Danmaku[]) {\n    this.ui.danmakuLayer.danmakus.push(...array)\n  }\n\n  get currentTime () {\n    return this.$video.currentTime\n  }\n\n  sendDanmaku (danmaku: Danmaku) {\n    this.ui.danmakuLayer.send(danmaku)\n  }\n\n  get paused () {\n    return this._paused\n  }\n\n  toggle () {\n    if (this.paused) {\n      this.play()\n    } else {\n      this.pause()\n    }\n  }\n\n  play () {\n    this._paused = false\n    this.$video.play().then()\n    if (this.options.onlyOne) {\n      Player.instances.forEach(player => {\n        if (player !== this) {\n          player.pause()\n        }\n      })\n    }\n  }\n\n  pause () {\n    this._paused = true\n    this.$video.pause()\n  }\n\n  private async getContentType () {\n    const src = this.$video.getAttribute('src') as string\n    console.log('', src)\n    if (src) {\n      if (src.match(/\\.m3u[8]/)) this.type = VideoType.Hls\n      if (src.match(/\\.mpd/)) this.type = VideoType.Dash\n      this.options.src = src\n    }\n    if (this.type === VideoType.Hls) {\n      console.log('Hls.js')\n      if (Hls.isSupported()) {\n        this.hls = new Hls()\n        this.hls.config.capLevelToPlayerSize = true\n        this.hls.attachMedia(this.$video)\n        this.hls.loadSource(src)\n      } else {\n        const http = new XMLHttpRequest()\n        http.open('Get', src)\n        http.send()\n        const contentType: string | null = await new Promise(resolve => {\n          http.onreadystatechange = () => {\n            if (http.readyState === XMLHttpRequest.HEADERS_RECEIVED) {\n              if (http.status === 200) {\n                resolve(http.getResponseHeader('Content-Type') as string)\n              } else {\n                resolve(null)\n              }\n              http.abort()\n            }\n          }\n        })\n        console.log({ contentType })\n        if (contentType && this.$video.canPlayType(contentType)) {\n          this.options.src = this.$video.src = src\n        }\n      }\n    } else if (this.type === VideoType.Dash) {\n      console.log('dash.js')\n    }\n  }\n\n  /**\n   * \n   */\n  async toggleFullScreen () {\n    this.isFullScreen = !this.isFullScreen\n    if (this.isFullScreen) {\n      await this.$root.requestFullscreen()\n    } else {\n      await document.exitFullscreen()\n    }\n    this.resize()\n  }\n\n  /**\n   * \n   */\n  destroy () {\n    Player.instances.splice(Player.instances.indexOf(this), 1)\n    this.ui.destroy()\n    if (this.hls) {\n      this.hls.detachMedia()\n    }\n  }\n\n  get debug (): Object {\n    let quality = ''\n    let src = this.options.src\n    if (this.hls) {\n      if (this.ui.qualitySelector.currentLevel === -1) {\n        quality = ' '\n      } else {\n        quality = ''\n      }\n      if (this.hls.currentLevel !== -1) {\n        quality += this.hls.levels[this.hls.currentLevel].name + 'P'\n      }\n    }\n    return {\n      width: this.width,\n      height: this.height,\n      src,\n      quality,\n      ui: this.ui.debug\n    }\n  }\n}\n","import { Player } from '@/player/player'\nimport { MakeDanmakuOptions } from '@/player/danmaku/danmaku'\nimport { MakeDanmakuLayerOptions } from '@/player/danmaku/danmakuLayer'\n\nexport default {\n  Player: Player,\n  MakeDanmakuOptions: MakeDanmakuOptions,\n  MakeDanmakuLayerOptions: MakeDanmakuLayerOptions\n}\n","import './setPublicPath'\nimport mod from '~entry'\nexport default mod\nexport * from '~entry'\n"],"sourceRoot":""}